{"version":3,"sources":["Table.js"],"names":["Table","indexOf","item","i","l","this","length","data","prop","ref","value","request","existMore","order","filter","actionsDiv","$","menuDiv","table","head","body","foot","onOrder","onFilter","onGetData","onRowSelect","onCloseRowContainer","current","swig","setFilter","input","templates","actions","compile","menu","columns","rows","constructor","tableBinds","VERSION","start","loadMoreLength","fromBottomNextPage","attrs","footer","url","datePickerOptions","dateFormat","constrainInput","timePickerOptions","timeFormat","showDefaultOrder","editedNotification","contextMenu","selectable","selectFirst","defaultAction","scrollAlign","arrowNavigation","height","heightOfParent","MSSQLPagination","filterTimeOut","autoRefresh","margin","prototype","getData","ordering","MSSQLData","lastRow","addClass","getJSON","response","removeClass","renderRows","always","nextPage","resetTable","abort","html","updateActions","columnsBinds","orderBind","filterBind","fn","datepicker","extend","showOn","find","attr","on","e","c","change","changeValue","date","j","k","len","now","ref1","restOfYear","val","keyCode","type","Date","d","m","y","replace","match","setDate","getDate","parseInt","getFullYear","toString","trigger","slice","toLowerCase","setMonth","getMonth","setFullYear","each","allEvents","typeEvents","_data","unshift","pop","dateInput","datePickerToFormat","ctrlKey","toISOString","doFilter","timepicker","showSecond","timeInput","timePickerToFormat","select","charCode","hasClass","which","String","fromCharCode","parent","element","doNow","name","oldFilter","timeoutBind","clearTimeout","setTimeout","oldOrder","orderBy","orderByIndex","action","bindActions","rowSelect","index","prevAll","id","document","getSelection","removeAllRanges","callback","bodyHeight","bodyPos","fromBottom","lastHeight","lastPos","positionLimit","top","position","bottom","toolTip","css","outerHeight","off","E","H","RM","ST","newRow","row","tables","target","is","closest","first","not","nextAll","scrollTop","offset","event","left","menuAction","global","call","append","clientY","clientX","width","remove","unbind","rowIndex","addRowContainer","content","pinned","container","rowContainer","cols","next","insertAfter","prepend","scrollRowContainer","topPosition","rowResize","closeRowContainer","force","cb","continueCallback","rowContainers","eq","rowActive","prev","confirm","lockAction","lock","disable","actionButton","rowElement","actionContentDisabled","actionDisabled","ref2","renderActions","makeActions","push","appendRows","Array","isArray","cells","apply","columnRule","style","cssRule","exist","len1","rule","rulePos","selector","sheet","sheets","styleSheets","ownerNode","cssRules","rules","selectorText","deleteRule","removeRule","addRule","insertRule","columnsResize","check","colIndex","column","fixedCols","len2","len3","len4","minWidth","n","o","p","ref3","tableWidth","colspan","display","hide","show","rowspan","parseFloat","paddingRight","isNaN","getNiceScroll","fullHeight","maxHeight","get","scrollHeight","resize","niceScroll","horizrailenabled","cursoropacitymin","railalign","enablekeyboard","cursorwidth","railpadding","right","renderColumns","field","substr","sort","renderFooter","footerRows","uid","Math","floor","random","substring","render","JSON","parse","stringify","window"],"mappings":"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","file":"Table.min.js","sourcesContent":["var Table,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nTable = (function() {\n  Table.VERSION = '1.2.0';\n\n  Table[\"default\"] = {\n    start: 0,\n    length: 100,\n    loadMoreLength: 50,\n    fromBottomNextPage: 50,\n    attrs: {},\n    actions: [],\n    columns: [],\n    footer: [],\n    rows: [],\n    url: '',\n    datePickerOptions: {\n      dateFormat: 'dd/mm/yy',\n      constrainInput: true\n    },\n    timePickerOptions: {\n      timeFormat: 'HH:mm'\n    },\n    showDefaultOrder: false,\n    editedNotification: true,\n    contextMenu: true,\n    selectable: true,\n    selectFirst: false,\n    defaultAction: null,\n    scrollAlign: 'right',\n    arrowNavigation: false,\n    height: null,\n    heightOfParent: null,\n    MSSQLPagination: false,\n    filterTimeOut: 300,\n    autoRefresh: true,\n    margin: null\n  };\n\n  function Table(data) {\n    var i, prop, ref, value;\n    this.request = null;\n    this.existMore = true;\n    this.order = '';\n    this.filter = {};\n    this.actionsDiv = $('<div />');\n    this.menuDiv = $('<ul />');\n    this.table = $('<div class=\"table\" />');\n    this.head = $('<div class=\"head\" />');\n    this.body = $('<div class=\"body\" />');\n    this.foot = $('<div class=\"foot\" />');\n    this.onOrder = null;\n    this.onFilter = null;\n    this.onGetData = null;\n    this.onRowSelect = null;\n    this.onCloseRowContainer = null;\n    this.current = null;\n    swig.setFilter('hasValue', function(input) {\n      return typeof input.value !== 'undefined';\n    });\n    this.templates = {\n      actions: swig.compile('{% for action in actions %}{% if not action.element %}<button type=\"button\" class=\"btn {{action.class}}\" data-action=\"{{action.id}}\">{{action.label}}</button>{% endif%}{% endfor %}'),\n      menu: swig.compile('{% for action in actions %}<li data-action=\"{{action.id}}\">{{action.label}}</li>{% endfor %}'),\n      columns: swig.compile('<table><thead><tr>{% for i in Array.prototype.constructor.call(null, rows.columns) %}<th class=\"col-{{loop.index0}}\"></th>{% endfor %}</tr></thead><tbody>{% for row in rows %}<tr>{% for column in row %}<td{% if column.attrs and column.attrs.class %} class=\"{{column.attrs.class}}\"{% endif %}{% for attr, value in column.attrs %}{% if attr != \"width\" and attr != \"class\" %} {{attr}}=\"{{value}}\"{% endif %}{% endfor %}>{% if column.label %}<label{% if column.name and column.order %} data-order=\"{{column.name}}\" class=\"order{% if order and order.field == column.name %} {{order.sort}}{% endif %}\"{% endif %}{% if column.label.key %} data-i18n=\"{{column.label.key}}\">{{column.label.text}}{% else %}>{{column.label}}{% endif %}</label>{% endif %} {% if column.filter == \"select\" %}<select name=\"{{column.name}}\">{% for option in column.filterData %}<option value=\"{{option.value}}\"{% if column.filterValue and column.filterValue == option.value %} selected=\"selected\"{% endif %}{% if option.label.key %} data-i18n=\"{{option.label.key}}\">{{option.label.text}}{% else %}>{{option.label}}{% endif %}</option>{% endfor %}</select>{% elif column.filter == \"date\" or column.filter == \"datetime\" or column.filter == \"time\" %}{% if column.filter != \"time\" %}<div class=\"date-picker\"><input autocomplete=\"off\" type=\"text\" name=\"{{column.name}}{% if column.filter == \"datetime\" %}[date]{% endif %}\" value=\"{{column.filterValue}}\"/></div>{% endif %}{% if column.filter != \"date\" %}<div class=\"time-picker\"><input autocomplete=\"off\" type=\"text\" name=\"{{column.name}}{% if column.filter == \"datetime\" %}[time]{% endif %}\" value=\"{{column.filterValue}}\"/></div>{% endif %}{% elif column.filter == \"text\" %}<input autocomplete=\"off\" type=\"text\" name=\"{{column.name}}\" value=\"{{column.filterValue}}\"/>{% elif column.filter == \"number\" or column.filter == \"comparison\" %}<input autocomplete=\"off\" type=\"text\" name=\"{{column.name}}\" class=\"number{% if column.filter == \"comparison\" %} comparison{% if column.extendedFilter %} extended{% endif %}{% endif %}\" value=\"{{column.filterValue}}\"/>{% elif column.filter %}<input autocomplete=\"off\" type=\"{{column.filter}}\" name=\"{{column.name}}\" value=\"{{column.filterValue}}\"/>{% endif %}</td>{% endfor %}</tr>{% endfor %}</tbody></table>'),\n      rows: swig.compile('{% if rows.head %}<table><thead><tr>{% for i in Array.prototype.constructor.call(null, rows.columns) %}<th class=\"col-{{loop.index0}}\"></th>{% endfor %}</tr></thead><tbody>{% endif %}{% for row in rows %}<tr{% if row.attrs %}{% for attr, value in row.attrs %} {{attr}}=\"{{value}}\"{% endfor %}{% endif %}>{% for cell in row.cells %}<td{% if cell.attrs %}{% for attr, value in cell.attrs %} {{attr}}=\"{{value}}\"{% endfor %}{% endif %}{% if cell|hasValue %}{% if not cell.safe %} title=\"{{cell.value}}\"{% endif %}>{% if cell.safe %}{{cell.value|safe}}{% else %}{{cell.value}}{% endif %}{% else %} title=\"{{cell}}\">{{cell}}{% endif %}</td>{% endfor %}</tr>{% endfor %}{% if rows.head %}</tbody></table>{% endif %}'),\n      foot: swig.compile('<table><thead><tr>{% for i in Array.prototype.constructor.call(null, rows.columns) %}<th class=\"col-{{loop.index0}}\"></th>{% endfor %}</tr></thead><tbody>{% for row in rows %}<tr{% if row.attrs %}{% for attr, value in row.attrs %} {{attr}}=\"{{value}}\"{% endfor %}{% endif %}>{% for cell in row.cells %}<td{% if cell.attrs %}{% for attr, value in cell.attrs %} {{attr}}=\"{{value}}\"{% endfor %}{% endif %}{% if cell|hasValue %}{% if not cell.safe %} title=\"{{cell.value}}\"{% endif %}>{% if cell.safe %}{{cell.value|safe}}{% else %}{{cell.value}}{% endif %}{% else %} title=\"{{cell}}\">{{cell}}{% endif %}</td>{% endfor %}</tr>{% endfor %}</tbody><tfoot><tr><th colspan=\"{{rows.columns}}\"><div class=\"spinner\"><div></div><div></div><div></div><div></div></div></th></tr></tfoot></table>')\n    };\n    ref = this.constructor[\"default\"];\n    for (prop in ref) {\n      value = ref[prop];\n      this[prop] = value;\n    }\n    for (i in data) {\n      if (i in this) {\n        this[i] = data[i];\n      }\n    }\n    this.tableBinds();\n  }\n\n  Table.prototype.getData = function() {\n    var data, filter, ref, table, value;\n    table = this;\n    data = {\n      start: this.start,\n      length: table.start ? table.loadMoreLength : table.length\n    };\n    if (this.order) {\n      data.ordering = this.order;\n    }\n    if (this.filter) {\n      ref = this.filter;\n      for (filter in ref) {\n        value = ref[filter];\n        data[filter] = value;\n      }\n    }\n    if (table.start && (this.MSSQLData != null)) {\n      data.lastRow = this.MSSQLData;\n    }\n    if (this.existMore) {\n      this.table.addClass('loading');\n      this.request = $.getJSON(this.url, data, function(response) {\n        table.table.removeClass('loading');\n        table.request = null;\n        if (table.MSSQLPagination) {\n          table.MSSQLData = response[response.length - 1];\n        }\n        if (table.onGetData != null) {\n          response = table.onGetData(response, table);\n        }\n        table.renderRows(response, !!table.start);\n        if (!response.length || response.length < (table.start ? table.loadMoreLength : table.length)) {\n          return table.existMore = false;\n        } else {\n          return table.start += response.length;\n        }\n      }).always(function() {\n        table.table.removeClass('loading');\n        table.request = null;\n      });\n    }\n  };\n\n  Table.prototype.nextPage = function() {\n    if (this.request == null) {\n      this.getData();\n    }\n  };\n\n  Table.prototype.resetTable = function() {\n    if (this.request != null) {\n      this.request.abort();\n    }\n    this.request = null;\n    this.start = 0;\n    this.existMore = true;\n    this.body.html('');\n    this.getData();\n    this.updateActions();\n  };\n\n  Table.prototype.columnsBinds = function() {\n    this.orderBind();\n    this.filterBind();\n  };\n\n  Table.prototype.filterBind = function() {\n    var datePickerOptions, filter, table, timePickerOptions;\n    table = this;\n    filter = null;\n    if ($.fn.datepicker != null) {\n      datePickerOptions = $.extend({}, this.datePickerOptions);\n      datePickerOptions.showOn = 'button';\n      if ((datePickerOptions.constrainInput != null) && datePickerOptions.constrainInput) {\n        datePickerOptions.constrainInput = false;\n      }\n      this.head.find('.date-picker input').datepicker(datePickerOptions);\n      this.head.find('.date-picker .ui-datepicker-trigger').attr('tabIndex', -1);\n      if ((this.datePickerOptions.constrainInput != null) && this.datePickerOptions.constrainInput) {\n        this.head.find('.date-picker input').on('keydown.table blur', function(e) {\n          var c, change, changeValue, date, dateFormat, i, j, k, len, now, ref, ref1, restOfYear, val;\n          if (((ref = e.keyCode) === 13 || ref === 9) || e.type === 'blur') {\n            now = new Date();\n            date = {\n              d: '',\n              m: '',\n              y: ''\n            };\n            dateFormat = datePickerOptions.dateFormat.replace(/[^\\w]/g, '').replace(/y/g, 'yy');\n            val = $(this).val();\n            if (val.match(/^(\\+|-)\\d+$/g)) {\n              now.setDate(now.getDate() + parseInt(val));\n            } else if (val.match(/^\\d+$/)) {\n              for (i = j = 0, len = dateFormat.length; j < len; i = ++j) {\n                c = dateFormat[i];\n                if (i < val.length) {\n                  date[c] += val[i];\n                }\n              }\n              if (date.y.length !== 4) {\n                restOfYear = '';\n                for (i = k = 0, ref1 = 4 - date.y.length; 0 <= ref1 ? k < ref1 : k > ref1; i = 0 <= ref1 ? ++k : --k) {\n                  restOfYear += now.getFullYear().toString()[i];\n                }\n                date.y = restOfYear + date.y;\n              }\n            } else if (val.match(/^((\\+|-)(\\d+)(d|m|y)){1,3}$/ig)) {\n              while (val.match(/((\\+|-)(\\d+)(d|m|y))/i)) {\n                change = val.match(/((\\+|-)(\\d+)(d|m|y))/i)[0];\n                val = val.replace(change, '');\n                changeValue = parseInt(change.slice(0, -1));\n                if (change.toLowerCase().slice(-1) === 'd') {\n                  now.setDate(now.getDate() + changeValue);\n                }\n                if (change.toLowerCase().slice(-1) === 'm') {\n                  now.setMonth(now.getMonth() + changeValue);\n                }\n                if (change.toLowerCase().slice(-1) === 'y') {\n                  now.setFullYear(now.getFullYear() + changeValue);\n                }\n              }\n            } else {\n              $(this).trigger('change');\n              return;\n            }\n            if (date.d) {\n              now.setDate(parseInt(date.d));\n            }\n            if (date.m) {\n              now.setMonth(parseInt(date.m) - 1);\n            }\n            if (date.y) {\n              now.setFullYear(parseInt(date.y));\n            }\n            $(this).datepicker('setDate', now);\n            $(this).trigger('change');\n          }\n        });\n        this.head.find('.date-picker input').each(function() {\n          var allEvents, typeEvents;\n          allEvents = $(this).data('events') || $._data($(this)[0], 'events');\n          typeEvents = allEvents['keydown'];\n          typeEvents.unshift(typeEvents.pop());\n        });\n      }\n      this.head.find('.date-picker input').on('change keyup.table', function(e) {\n        var dateInput;\n        dateInput = $(this).val();\n        if (e.type === 'keyup' && !((e.keyCode != null) && e.keyCode === 13 || !dateInput.length || dateInput.length === table.datePickerOptions.dateFormat.replace(/y/g, 'yy').length)) {\n          return;\n        }\n\n        /*\n        \t\t\t\tif dateInput.length == 0 && $(@).datepicker.is(':focus')\n        \t\t\t\t\t$(@).datepicker('hide')\n         */\n        if (table.datePickerOptions.datePickerToFormat != null) {\n          filter = table.datePickerOptions.datePickerToFormat(dateInput);\n          if (filter === 'Invalid Date' || (filter == null)) {\n            filter = null;\n          } else {\n            if (e.type === 'keyup' && !(e.ctrlKey || e.keyCode === 17)) {\n              $(this).datepicker('setDate', filter);\n            }\n            filter = filter.toISOString();\n          }\n        } else {\n          filter = dateInput;\n        }\n        table.doFilter(this, filter);\n      });\n    }\n    if ($.fn.timepicker != null) {\n      timePickerOptions = $.extend({}, this.timePickerOptions);\n      timePickerOptions.showOn = 'button';\n      this.head.find('.time-picker input').timepicker(timePickerOptions);\n      this.head.find('.time-picker .ui-datepicker-trigger').attr('tabIndex', -1);\n      if ((timePickerOptions.showSecond != null) && timePickerOptions.showSecond) {\n        this.head.find('.time-picker').addClass('seconds');\n      }\n      this.head.find('.time-picker input').on('change keyup.table', function(e) {\n        var timeInput;\n        timeInput = $(this).val();\n        if (e.type === 'keyup' && !((e.keyCode != null) && e.keyCode === 13 || !timeInput.length || timeInput.length === table.timePickerOptions.timeFormat.length)) {\n          return;\n        }\n        if (table.timePickerOptions.timePickerToFormat != null) {\n          filter = table.datePickerOptions.datePickerToFormat(timeInput);\n        } else {\n          filter = timeInput;\n        }\n        table.doFilter(this, filter, false);\n      });\n    }\n    this.head.find('input').on('focus.table', function() {\n      $(this).select();\n    });\n    this.head.find('input').on('keypress.table', function(e) {\n      var keyCode, ref, value;\n      if (!e.charCode) {\n        return;\n      }\n      if ($(this).hasClass('number')) {\n        keyCode = e.which || e.keyCode;\n        if (keyCode < 48 || keyCode > 57) {\n          value = $(this).val();\n          if ($(this).hasClass('comparison') && (!value.match(/\\./) && keyCode === 46 || (!value.match(/[=><]/) || $(this).hasClass('extended') && (value.match(/([=><]+)/g) && ((ref = value.match(/([=><]+)/g)[0] + String.fromCharCode(keyCode)) === '<=' || ref === '<>' || ref === '>='))) && (keyCode === 62 || keyCode === 61 || keyCode === 60))) {\n            return;\n          }\n          return false;\n        }\n      }\n    });\n    this.head.find('input').on('keyup.table', function() {\n      if (!$(this).parent().hasClass('date-picker') && !$(this).parent().hasClass('time-picker')) {\n        filter = $(this).val();\n        table.doFilter(this, filter, false);\n      }\n    });\n    this.head.find('select').on('change', function() {\n      table.doFilter(this, $(this).val());\n    });\n    this.head.find('input:checkbox').on('change', function() {\n      table.doFilter(this, $(this).prop(\"checked\"));\n    });\n  };\n\n  Table.prototype.doFilter = function(element, filter, doNow) {\n    var name, oldFilter, table;\n    if (doNow == null) {\n      doNow = true;\n    }\n    oldFilter = $.extend(true, {}, this.filter);\n    name = $(element).attr('name');\n    table = this;\n    if (this.timeoutBind == null) {\n      this.timeoutBind = null;\n    }\n    if (this.onFilter != null) {\n      this.onFilter(element, filter);\n    } else {\n      if ((filter != null) && !filter) {\n        filter = null;\n      }\n      if (filter != null) {\n        this.filter[name] = filter;\n      } else {\n        delete this.filter[name];\n      }\n      if (oldFilter[name] !== this.filter[name] && this.autoRefresh) {\n        clearTimeout(this.timeoutBind);\n        if (doNow) {\n          table.resetTable();\n        } else {\n          this.timeoutBind = setTimeout(function() {\n            table.resetTable();\n          }, table.filterTimeOut);\n        }\n      }\n    }\n  };\n\n  Table.prototype.orderBind = function() {\n    var table;\n    table = this;\n    this.head.find('label.order').on('click.table', function() {\n      var oldOrder, orderBy, orderByIndex;\n      if (table.request) {\n        return false;\n      }\n      oldOrder = table.order;\n      orderBy = $(this).data('order');\n      orderByIndex = table.order.indexOf(orderBy);\n      table.head.find('label.order').removeClass('asc desc');\n      if (orderByIndex !== -1) {\n        if (orderByIndex) {\n          table.order = orderBy;\n          $(this).addClass('asc');\n        } else {\n          table.order = \"-\" + orderBy;\n          $(this).addClass('desc');\n        }\n      } else {\n        table.order = orderBy;\n        $(this).addClass('asc');\n      }\n      if (table.onOrder != null) {\n        table.onOrder(table.order);\n      } else {\n        if (oldOrder !== table.order) {\n          table.resetTable();\n        }\n      }\n      return false;\n    });\n  };\n\n  Table.prototype.tableBinds = function() {\n    var action, actionsDiv, defaultAction, j, len, ref, table;\n    table = this;\n    this.bindActions();\n    if (this.contextMenu) {\n      this.body.on('contextmenu.table', 'tr:not(.row-content)', function(e) {\n        table.menu(this, e);\n        return false;\n      });\n    }\n    if (this.selectable) {\n      this.body.on('mousedown.table', 'tr:not(.row-content)', function() {\n        if (table.request != null) {\n          return false;\n        }\n        if (table.rowSelect($(this).index() - $(this).prevAll('.row-content').length, this)) {\n          $(table.body).find('tr').removeClass('active');\n          $(this).addClass('active');\n        }\n      });\n    }\n    if (this.defaultAction && this.actions) {\n      ref = this.actions;\n      for (j = 0, len = ref.length; j < len; j++) {\n        action = ref[j];\n        if (action.id === this.defaultAction) {\n          defaultAction = action;\n          actionsDiv = this.actionsDiv;\n          this.body.on('dblclick.table', 'tr:not(.row-content)', function() {\n            if (table.request != null) {\n              return false;\n            }\n            document.getSelection().removeAllRanges();\n            if (actionsDiv.find(\"[data-action=\" + defaultAction.id + \"]\").length) {\n              actionsDiv.find(\"[data-action=\" + defaultAction.id + \"]\").trigger('click.table');\n            } else {\n              defaultAction.callback(table.rows[table.current], table);\n            }\n          });\n        }\n      }\n    }\n    this.body.on('scroll.table', function() {\n      var bodyHeight, bodyPos, fromBottom, lastHeight, lastPos, positionLimit;\n      if (table.body.find('tr.row-content').find('form').length) {\n        positionLimit = {\n          top: table.body.position().top,\n          bottom: table.body.position().top + table.body.height()\n        };\n        table.body.find('tr.row-content').find('form').find('.error').each(function() {\n          var toolTip, top;\n          top = $(this).position().top;\n          toolTip = $(this).find('.error-text');\n          if (top > positionLimit.top && top + toolTip.height() < positionLimit.bottom) {\n            toolTip.css('top', top);\n          } else {\n            toolTip.css('top', -9999);\n          }\n        });\n      }\n      bodyPos = table.body.position();\n      bodyHeight = table.body.height();\n      if (table.body.find('tbody tr').length) {\n        lastPos = table.body.find('tbody tr:last').position();\n        lastHeight = table.body.find('tbody tr:last').outerHeight();\n        fromBottom = (lastPos.top + lastHeight) - (bodyHeight + bodyPos.top);\n        if (fromBottom < table.fromBottomNextPage && fromBottom >= 0) {\n          table.nextPage();\n        }\n      }\n    });\n    $('body').off('keydown.table');\n    $('body').on('keydown.table', function(e) {\n      var E, H, RM, ST, body, newRow, row, tables;\n      if (!(e.keyCode === 38 || e.keyCode === 40 || e.keyCode === 13) || $(e.target).is('input, textarea, select')) {\n        return;\n      }\n      tables = $('.table-data.arrow-navigation:visible');\n      if (tables.find('.body tr.active').length) {\n        tables = tables.find('.body tr.active').closest('.table-data');\n        if (tables.filter('.active').length) {\n          tables = tables.filter('.active');\n        } else {\n          tables = tables.first();\n        }\n        body = $('.body', tables);\n        row = $('tr.active', tables);\n        if (row.length) {\n          if (e.keyCode === 13) {\n            row.trigger('dblclick.table');\n          } else {\n            if (e.keyCode === 38) {\n              newRow = row.prevAll().not('.row-content');\n            } else {\n              newRow = row.nextAll().not('.row-content');\n            }\n            newRow = newRow.first();\n            if (newRow.length) {\n              newRow.trigger('mousedown.table');\n              H = body.height();\n              E = newRow.height();\n              ST = body.scrollTop();\n              RM = newRow.offset().top - body.offset().top;\n              if (RM < 0) {\n                body.scrollTop(ST + RM);\n              } else if (RM + E > H) {\n                body.scrollTop((RM - H) + ST + E);\n              }\n            }\n          }\n        }\n      }\n    });\n  };\n\n  Table.prototype.menu = function(element, event) {\n    var action, j, left, len, menuAction, ref, ref1, table, top;\n    if (this.contextMenu) {\n      this.menuDiv.html(this.templates.menu({\n        actions: this.actions\n      }));\n      table = this;\n      ref = this.actions;\n      for (j = 0, len = ref.length; j < len; j++) {\n        action = ref[j];\n        this.menuDiv.attr({\n          id: 'contextmenu'\n        }).find(\"[data-action=\" + action.id + \"]\").data('action-data', action).on('mousedown.table', function() {\n          action = $(this).data('action-data');\n          if (action.callback != null) {\n            action.callback(table.rows[table.current], table);\n          }\n        });\n        menuAction = this.menuDiv.find(\"[data-action=\" + action.id + \"]\");\n        if (!((action.global != null) || action.global) && ($(element).data('action-disabled') != null) && (ref1 = action.id, indexOf.call($(element).data('action-disabled'), ref1) >= 0)) {\n          menuAction.addClass('disabled');\n        } else {\n          menuAction.removeClass('disabled');\n        }\n      }\n      $(document.body).append(this.menuDiv);\n      top = event.clientY;\n      left = event.clientX;\n      if (top + this.menuDiv.height() + 5 > $(document).height()) {\n        top -= this.menuDiv.height();\n      }\n      if (left + this.menuDiv.width() + 5 > $(document).width()) {\n        left -= this.menuDiv.width();\n      }\n      this.menuDiv.css({\n        top: top,\n        left: left\n      });\n      $(document).on('mousedown.table', function() {\n        $('#contextmenu').remove();\n        return $(document).unbind('mousedown.table');\n      });\n    }\n  };\n\n  Table.prototype.rowSelect = function(rowIndex, element) {\n    this.current = rowIndex;\n    this.updateActions(element);\n    if (this.onRowSelect != null) {\n      return this.onRowSelect(this.rows[rowIndex], element);\n    }\n    return true;\n  };\n\n  Table.prototype.addRowContainer = function(content, pinned) {\n    var container, rowContainer, rows;\n    if (pinned == null) {\n      pinned = false;\n    }\n    rowContainer = $('<tr />');\n    container = $(\"<td colspan=\\\"\" + this.cols + \"\\\" />\");\n    container.html(content);\n    rowContainer.addClass('row-content').html(container);\n    if (pinned) {\n      if (this.body.find('tr.active').next().hasClass('row-content')) {\n        return;\n      }\n      rowContainer.addClass('pinned');\n      rowContainer.insertAfter(this.body.find('tr.active'));\n      this.updateActions(this.body.find('tr.active'));\n    } else {\n      if (!this.body.find('tbody').length) {\n        rows = [];\n        rows.columns = this.cols;\n        rows.head = true;\n        this.body.html(this.templates.rows({\n          rows: rows\n        }));\n      }\n      this.body.find('tbody').prepend(rowContainer);\n    }\n    this.scrollRowContainer(rowContainer);\n    return rowContainer;\n  };\n\n  Table.prototype.scrollRowContainer = function(rowContainer) {\n    var topPosition;\n    this.rowResize();\n    topPosition = this.body.position();\n    if (rowContainer.hasClass('pinned')) {\n      topPosition.top += this.body.find('tr.active').height();\n    }\n    this.body.scrollTop(this.body.scrollTop() + (rowContainer.position().top - topPosition.top));\n  };\n\n  Table.prototype.closeRowContainer = function(index, force) {\n    var cb, continueCallback, rowContainer, rowContainers, table;\n    if (force == null) {\n      force = false;\n    }\n    table = this;\n    rowContainers = this.body.find('tbody tr');\n    if (!this.editedNotification) {\n      force = true;\n    }\n    if (rowContainers.length > index) {\n      rowContainer = rowContainers.eq(index);\n      continueCallback = function() {\n        var rowActive;\n        rowActive = rowContainer.prev('.active');\n        rowContainer.remove();\n        if (rowActive.length) {\n          table.updateActions(rowActive);\n        }\n        if (!table.body.find('tbody tr').length) {\n          table.body.html('');\n        }\n        table.rowResize();\n      };\n      if (this.onCloseRowContainer != null) {\n        cb = this.onCloseRowContainer(index, force, this, rowContainer, continueCallback);\n        if ((cb != null) && !cb) {\n          return false;\n        }\n      } else if (!force && rowContainer.is('.edited') && !confirm('You are sure?\\n Added/edited data not was saved')) {\n        return false;\n      }\n      continueCallback();\n    }\n    return true;\n  };\n\n  Table.prototype.lockAction = function(id, lock, disable) {\n    var action, actionButton, j, len, ref;\n    if (lock == null) {\n      lock = null;\n    }\n    if (disable == null) {\n      disable = false;\n    }\n    ref = this.actions;\n    for (j = 0, len = ref.length; j < len; j++) {\n      action = ref[j];\n      if (action.id === id) {\n        if (action.element != null) {\n          actionButton = $(action.element);\n        } else {\n          actionButton = this.actionsDiv.find(\"[data-action=\" + action.id + \"]\");\n        }\n        if (actionButton.hasClass('locked') && ((lock == null) || (lock != null) && !lock)) {\n          actionButton.removeClass('locked');\n        } else {\n          actionButton.addClass('locked');\n        }\n        if (disable) {\n          actionButton.addClass('disabled');\n        } else {\n          actionButton.removeClass('disabled');\n        }\n        return;\n      }\n    }\n  };\n\n  Table.prototype.updateActions = function(rowElement) {\n    var action, actionButton, actionContentDisabled, actionDisabled, j, len, menuAction, ref, ref1, ref2;\n    if (rowElement == null) {\n      rowElement = null;\n    }\n    if (rowElement != null) {\n      actionDisabled = $(rowElement).data('action-disabled') != null ? $(rowElement).data('action-disabled') : null;\n      actionContentDisabled = ($(rowElement).data('action-content-disabled') != null) && $(rowElement).next('.row-content').length ? $(rowElement).data('action-content-disabled') : null;\n    } else {\n      actionDisabled = actionContentDisabled = null;\n    }\n    ref = this.actions;\n    for (j = 0, len = ref.length; j < len; j++) {\n      action = ref[j];\n      if (action.element != null) {\n        actionButton = $(action.element);\n      } else {\n        actionButton = this.actionsDiv.find(\"[data-action=\" + action.id + \"]\");\n      }\n      menuAction = this.menuDiv.find(\"[data-action=\" + action.id + \"]\");\n      if ((this.request != null) || !((action.global != null) || action.global) && ((rowElement == null) || ((rowElement != null) && ((actionDisabled != null) && (ref1 = action.id, indexOf.call(actionDisabled, ref1) >= 0) || (actionContentDisabled != null) && (ref2 = action.id, indexOf.call(actionContentDisabled, ref2) >= 0))))) {\n        actionButton.addClass('disabled');\n        menuAction.addClass('disabled');\n      } else {\n        actionButton.removeClass('disabled');\n        menuAction.removeClass('disabled');\n      }\n    }\n  };\n\n  Table.prototype.renderActions = function() {\n    var action, j, len, makeActions, ref;\n    this.actionsDiv.addClass('table-actions');\n    makeActions = [];\n    ref = this.actions;\n    for (j = 0, len = ref.length; j < len; j++) {\n      action = ref[j];\n      if (action.element == null) {\n        makeActions.push(action);\n      }\n    }\n    this.actionsDiv.html(this.templates.actions({\n      actions: makeActions\n    }));\n    this.bindActions();\n    this.updateActions();\n    return this.actionsDiv;\n  };\n\n  Table.prototype.bindActions = function() {\n    var action, actionButton, j, len, ref, table;\n    table = this;\n    ref = this.actions;\n    for (j = 0, len = ref.length; j < len; j++) {\n      action = ref[j];\n      if (action.element != null) {\n        actionButton = $(action.element);\n      } else {\n        actionButton = this.actionsDiv.find(\"[data-action=\" + action.id + \"]\");\n      }\n      actionButton.data('action-data', action).off('click.table');\n      actionButton.data('action-data', action).on('click.table', function() {\n        if ($(this).hasClass('disabled') || $(this).hasClass('locked')) {\n          return;\n        }\n        action = $(this).data('action-data');\n        if (action.callback != null) {\n          action.callback(table.rows[table.current], table);\n        }\n      });\n    }\n  };\n\n  Table.prototype.renderRows = function(data, append) {\n    var appendRows, j, len, row;\n    if (append == null) {\n      append = false;\n    }\n    if (!append) {\n      this.rows = [];\n      this.body.scrollTop(0);\n      this.updateActions();\n    }\n    appendRows = [];\n    for (j = 0, len = data.length; j < len; j++) {\n      row = data[j];\n      if (Array.isArray(row)) {\n        appendRows.push({\n          attrs: null,\n          cells: row\n        });\n      } else {\n        appendRows.push(row);\n      }\n    }\n    Array.prototype.push.apply(this.rows, appendRows);\n    appendRows.columns = this.cols;\n    if (this.rows.length) {\n      if (appendRows.length) {\n        if (!append) {\n          appendRows.head = true;\n          this.body.html(this.templates.rows({\n            rows: appendRows\n          }));\n        } else {\n          this.body.find('tbody').append(this.templates.rows({\n            rows: appendRows\n          }));\n        }\n      }\n    } else {\n      this.body.html('');\n    }\n    if (this.table.is(':visible')) {\n      this.rowResize();\n    }\n    if (!append && this.selectable && this.selectFirst && this.rows.length) {\n      this.body.find('tbody tr:first').trigger('mousedown.table');\n    }\n    return this.body;\n  };\n\n  Table.prototype.columnRule = function(index, style) {\n    var attr, cssRule, exist, j, k, len, len1, rule, rulePos, selector, sheet, sheets, value;\n    if (style == null) {\n      style = null;\n    }\n    rule = \"#\" + (this.table.attr('id')) + \" table > thead > tr > .col-\" + index;\n    if (!$('#table_columns').length) {\n      $('head').append($('<style />').attr({\n        id: 'table_columns',\n        type: 'text/css'\n      }));\n    }\n    if (document.styleSheets) {\n      sheets = document.styleSheets;\n      for (j = 0, len = sheets.length; j < len; j++) {\n        sheet = sheets[j];\n        if ($(sheet.ownerNode).attr('id') === 'table_columns') {\n          break;\n        }\n      }\n    }\n    if (sheet.cssRules) {\n      cssRule = sheet.cssRules;\n    } else {\n      cssRule = sheet.rules;\n    }\n    exist = false;\n    for (rulePos = k = 0, len1 = cssRule.length; k < len1; rulePos = ++k) {\n      selector = cssRule[rulePos];\n      if ((selector.selectorText != null) && selector.selectorText.toLowerCase() === rule) {\n        exist = true;\n        break;\n      }\n    }\n    if (style == null) {\n      if (exist) {\n        if (sheet.cssRules) {\n          sheet.deleteRule(rulePos);\n        } else {\n          sheet.removeRule(rulePos);\n        }\n      }\n      return;\n    }\n    if (!exist) {\n      rulePos = cssRule.length;\n      exist = true;\n      if (sheet.addRule) {\n        sheet.addRule(rule, null, rulePos);\n      } else {\n        sheet.insertRule(rule + \" {}\", rulePos);\n      }\n    }\n    if (exist) {\n      for (attr in style) {\n        value = style[attr];\n        cssRule[rulePos].style[attr] = value;\n      }\n    }\n  };\n\n  Table.prototype.columnsResize = function() {\n    var check, colIndex, column, columnRule, columns, fixedCols, i, j, k, l, len, len1, len2, len3, len4, m, minWidth, n, o, p, ref, ref1, ref2, ref3, row, rows, table, tableWidth, width;\n    table = this;\n    fixedCols = 0;\n    columns = [];\n    rows = [];\n    this.cols = 0;\n    if (this.columns.length) {\n      if (!Array.isArray(this.columns[0])) {\n        rows = [this.columns];\n      } else {\n        rows = this.columns;\n      }\n      ref = rows[0];\n      for (j = 0, len = ref.length; j < len; j++) {\n        column = ref[j];\n        this.cols += (column.attrs != null) && (column.attrs.colspan != null) ? column.attrs.colspan : 1;\n      }\n    }\n    rows.columns = this.cols;\n    for (i = k = 0, ref1 = this.cols - 1; 0 <= ref1 ? k <= ref1 : k >= ref1; i = 0 <= ref1 ? ++k : --k) {\n      table.columnRule(i);\n    }\n    this.table.css({\n      width: ''\n    });\n    this.head.css({\n      display: 'inline-block',\n      width: 'auto'\n    }).find('table').css({\n      width: 'auto'\n    });\n    this.body.hide();\n    this.foot.hide();\n    tableWidth = this.table.width();\n    this.head.css({\n      display: '',\n      width: ''\n    }).find('table').css({\n      width: ''\n    });\n    this.body.show();\n    this.foot.show();\n    this.table.width(tableWidth);\n    ref2 = ['fixed', 'percent', 'auto'];\n    for (l = 0, len1 = ref2.length; l < len1; l++) {\n      check = ref2[l];\n      for (m = 0, len2 = rows.length; m < len2; m++) {\n        row = rows[m];\n        i = -1;\n        for (n = 0, len3 = row.length; n < len3; n++) {\n          column = row[n];\n          i++;\n          if (columns.length <= i) {\n            for (o = 0, ref3 = columns.length - i; 0 <= ref3 ? o <= ref3 : o >= ref3; 0 <= ref3 ? o++ : o--) {\n              columns.push({\n                rowspan: 0\n              });\n            }\n          }\n          if (columns[i].rowspan) {\n            columns[i].rowspan--;\n            i++;\n          }\n          if ((column.attrs != null) && (column.attrs.rowspan != null) && column.attrs.rowspan !== 1) {\n            columns[i].rowspan += column.attrs.rowspan - 1;\n          }\n          if ((column.attrs != null) && (column.attrs.colspan != null) && column.attrs.colspan !== 1) {\n            i += column.attrs.colspan - 1;\n            continue;\n          }\n          if (columns[i].width == null) {\n            width = 'auto';\n            minWidth = 'initial';\n            if (column.attrs != null) {\n              if (column.attrs.width != null) {\n                width = column.attrs.width;\n              }\n              if (column.attrs.minWidth != null) {\n                minWidth = column.attrs.minWidth;\n              }\n            }\n          } else {\n            width = columns[i].width;\n            minWidth = columns[i].minWidth;\n          }\n          if (check === 'fixed' && width.toString().match(/^\\d+(px)?$/)) {\n            width = parseInt(width);\n            tableWidth -= width;\n            fixedCols++;\n          } else if (check === 'percent' && width.toString().match(/^\\d+%$/)) {\n            width = parseInt(tableWidth * (parseFloat(width) / 100));\n            fixedCols++;\n          } else if (check === 'auto' && width === 'auto') {\n            width = parseInt(tableWidth * (1 / (this.cols - fixedCols)));\n          }\n          columns[i].width = width;\n          columns[i].minWidth = minWidth;\n        }\n      }\n    }\n    this.table.css({\n      paddingRight: tableWidth - parseInt(tableWidth * (1 / (this.cols - fixedCols))) * (this.cols - fixedCols)\n    });\n    for (colIndex = p = 0, len4 = columns.length; p < len4; colIndex = ++p) {\n      columnRule = columns[colIndex];\n      table.columnRule(colIndex, {\n        width: columnRule.width + 'px',\n        minWidth: columnRule.minWidth + (!isNaN(parseInt(columnRule.minWidth)) ? 'px' : '')\n      });\n    }\n    if (this.head.width() < this.head.find('table').width()) {\n      this.table.width(this.head.find('table').width());\n    }\n    if (!this.body.getNiceScroll().length) {\n      this.rowResize();\n    }\n  };\n\n  Table.prototype.rowResize = function() {\n    var fullHeight;\n    if (this.height != null) {\n      this.table.css('maxHeight', this.height);\n      fullHeight = this.table.height() - this.head.height() - this.foot.height();\n    } else if (this.body.height()) {\n      this.body.css('display', 'none');\n      fullHeight = parseInt(this.table.closest(this.heightOfParent).height()) - (parseFloat(this.table.outerHeight()) + (this.body.is(':empty') ? 1 : 0) - (this.margin != null ? this.margin : 0));\n    }\n    this.body.css({\n      maxHeight: fullHeight ? fullHeight : '',\n      display: 'block'\n    });\n    if (this.body.get(0).scrollHeight > fullHeight) {\n      if (!this.body.getNiceScroll().length) {\n        this.body.niceScroll({\n          horizrailenabled: false,\n          cursoropacitymin: 1,\n          railalign: this.scrollAlign,\n          enablekeyboard: !this.arrowNavigation,\n          cursorwidth: 3,\n          railpadding: {\n            top: 1,\n            right: 1,\n            left: 1,\n            bottom: 1\n          }\n        });\n      } else {\n        this.body.getNiceScroll().resize();\n      }\n    } else {\n      this.body.getNiceScroll().remove();\n    }\n  };\n\n  Table.prototype.renderColumns = function(columns) {\n    var column, j, len, order, ref, rows;\n    this.columns = columns;\n    order = null;\n    rows = [];\n    this.cols = 0;\n    if (this.columns.length) {\n      if (!Array.isArray(this.columns[0])) {\n        rows = [this.columns];\n      } else {\n        rows = this.columns;\n      }\n      ref = rows[0];\n      for (j = 0, len = ref.length; j < len; j++) {\n        column = ref[j];\n        this.cols += (column.attrs != null) && (column.attrs.colspan != null) ? column.attrs.colspan : 1;\n      }\n    }\n    rows.columns = this.cols;\n    if (this.showDefaultOrder && this.order) {\n      order = {\n        field: this.order.substr(!this.order.indexOf('-')),\n        sort: !this.order.indexOf('-') ? 'desc' : 'asc'\n      };\n    }\n    this.head.html(this.templates.columns({\n      rows: rows,\n      order: order\n    }));\n    this.columnsBinds();\n    return this.head;\n  };\n\n  Table.prototype.renderFooter = function(footerRows) {\n    var j, len, ref, row, rows;\n    this.footer = footerRows;\n    rows = [];\n    if (this.footer.length) {\n      ref = this.footer;\n      for (j = 0, len = ref.length; j < len; j++) {\n        row = ref[j];\n        if (Array.isArray(row)) {\n          rows.push({\n            attrs: null,\n            cells: row\n          });\n        } else {\n          rows.push(row);\n        }\n      }\n    }\n    rows.columns = this.cols;\n    this.foot.html(this.templates.foot({\n      rows: rows\n    }));\n    return this.foot;\n  };\n\n  Table.prototype.uid = function() {\n    return Math.floor((1 + Math.random()) * 0x100000000).toString(16).substring(1);\n  };\n\n  Table.prototype.render = function() {\n    var attrs, table;\n    attrs = JSON.parse(JSON.stringify(this.attrs));\n    if (attrs.id == null) {\n      attrs.id = \"uid_\" + (this.uid());\n    }\n    while ($(\"#uid_\" + this.attrs.id).length) {\n      attrs.id = \"uid_\" + (this.uid());\n    }\n    if (attrs[\"class\"] != null) {\n      this.table.addClass(attrs[\"class\"]);\n      delete attrs[\"class\"];\n    }\n    this.table.attr(attrs).addClass(\"table-data scroll-\" + this.scrollAlign + (this.selectable ? ' selectable' : '') + (this.arrowNavigation ? ' arrow-navigation' : ''));\n    this.renderColumns(this.columns);\n    this.renderRows(this.rows);\n    this.renderFooter(this.footer);\n    this.table.append(this.head);\n    this.table.append(this.body);\n    this.table.append(this.foot);\n    table = this;\n    $(window).on('resize.table', function() {\n      if (table.table.is(':visible')) {\n        table.columnsResize();\n        table.rowResize();\n      }\n    });\n    return this.table;\n  };\n\n  return Table;\n\n})();\n"],"sourceRoot":"/source/"}