{"version":3,"sources":["Table.coffee"],"names":[],"mappings":"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","file":"Table.js","sourceRoot":"/source/","sourcesContent":["class Table\r\n\t@VERSION = '1.2.0'\r\n\t@default = {\r\n\t\tstart: 0\r\n\t\tlength: 100\r\n\t\tloadMoreLength: 50\r\n\t\tfromBottomNextPage: 50\r\n\t\tattrs: {}\r\n\t\tactions: []\r\n\t\tcolumns: []\r\n\t\tfooter: []\r\n\t\trows: []\r\n\t\turl: ''\r\n\t\tdatePickerOptions: {\r\n\t\t\tdateFormat: 'dd/mm/yy'\r\n\t\t\tconstrainInput: true\r\n\t\t}\r\n\t\ttimePickerOptions: {\r\n\t\t\ttimeFormat: 'HH:mm'\r\n\t\t}\r\n\t\tshowDefaultOrder: false\r\n\t\teditedNotification: true\r\n\t\tcontextMenu: true\r\n\t\tselectable: true\r\n\t\tselectFirst: false\r\n\t\tdefaultAction: null\r\n\t\tscrollAlign: 'right'\r\n\t\tarrowNavigation: false\r\n\t\theight: null\r\n\t\theightOfParent: null\r\n\t\tMSSQLPagination: false\r\n\t\tfilterTimeOut: 300\r\n\t\tautoRefresh: true\r\n\t\tmargin: null\r\n\t}\r\n\r\n\tconstructor: (data) ->\r\n\t\t@request = null\r\n\t\t@existMore = true\r\n\t\t@order = ''\r\n\t\t@filter = {}\r\n\r\n\t\t@actionsDiv = $('<div />')\r\n\t\t@menuDiv = $('<ul />')\r\n\t\t@table = $('<div class=\"table\" />')\r\n\t\t@head = $('<div class=\"head\" />')\r\n\t\t@body = $('<div class=\"body\" />')\r\n\t\t@foot = $('<div class=\"foot\" />')\r\n\t\t@onOrder = null\r\n\t\t@onFilter = null\r\n\t\t@onGetData = null\r\n\t\t@onRowSelect = null\r\n\t\t@onCloseRowContainer = null\r\n\t\t@current = null\r\n\r\n\t\tswig.setFilter 'hasValue', (input) ->\r\n\t\t\treturn typeof input.value != 'undefined'\r\n\r\n\t\t@templates = {\r\n\t\t\tactions: swig.compile('{% for action in actions %}{% if not action.element %}<button type=\"button\" class=\"btn {{action.class}}\" data-action=\"{{action.id}}\">{{action.label}}</button>{% endif%}{% endfor %}'),\r\n\t\t\tmenu: swig.compile('{% for action in actions %}<li data-action=\"{{action.id}}\">{{action.label}}</li>{% endfor %}'),\r\n\t\t\tcolumns: swig.compile('<table><thead><tr>{% for i in Array.prototype.constructor.call(null, rows.columns) %}<th class=\"col-{{loop.index0}}\"></th>{% endfor %}</tr></thead><tbody>{% for row in rows %}<tr>{% for column in row %}<td{% if column.attrs and column.attrs.class %} class=\"{{column.attrs.class}}\"{% endif %}{% for attr, value in column.attrs %}{% if attr != \"width\" and attr != \"class\" %} {{attr}}=\"{{value}}\"{% endif %}{% endfor %}>{% if column.label %}<label{% if column.name and column.order %} data-order=\"{{column.name}}\" class=\"order{% if order and order.field == column.name %} {{order.sort}}{% endif %}\"{% endif %}{% if column.label.key %} data-i18n=\"{{column.label.key}}\">{{column.label.text}}{% else %}>{{column.label}}{% endif %}</label>{% endif %} {% if column.filter == \"select\" %}<select name=\"{{column.name}}\">{% for option in column.filterData %}<option value=\"{{option.value}}\"{% if column.filterValue and column.filterValue == option.value %} selected=\"selected\"{% endif %}{% if option.label.key %} data-i18n=\"{{option.label.key}}\">{{option.label.text}}{% else %}>{{option.label}}{% endif %}</option>{% endfor %}</select>{% elif column.filter == \"date\" or column.filter == \"datetime\" or column.filter == \"time\" %}{% if column.filter != \"time\" %}<div class=\"date-picker\"><input autocomplete=\"off\" type=\"text\" name=\"{{column.name}}{% if column.filter == \"datetime\" %}[date]{% endif %}\" value=\"{{column.filterValue}}\"/></div>{% endif %}{% if column.filter != \"date\" %}<div class=\"time-picker\"><input autocomplete=\"off\" type=\"text\" name=\"{{column.name}}{% if column.filter == \"datetime\" %}[time]{% endif %}\" value=\"{{column.filterValue}}\"/></div>{% endif %}{% elif column.filter == \"text\" %}<input autocomplete=\"off\" type=\"text\" name=\"{{column.name}}\" value=\"{{column.filterValue}}\"/>{% elif column.filter == \"number\" or column.filter == \"comparison\" %}<input autocomplete=\"off\" type=\"text\" name=\"{{column.name}}\" class=\"number{% if column.filter == \"comparison\" %} comparison{% if column.extendedFilter %} extended{% endif %}{% endif %}\" value=\"{{column.filterValue}}\"/>{% elif column.filter %}<input autocomplete=\"off\" type=\"{{column.filter}}\" name=\"{{column.name}}\" value=\"{{column.filterValue}}\"/>{% endif %}</td>{% endfor %}</tr>{% endfor %}</tbody></table>'),\r\n\t\t\trows: swig.compile('{% if rows.head %}<table><thead><tr>{% for i in Array.prototype.constructor.call(null, rows.columns) %}<th class=\"col-{{loop.index0}}\"></th>{% endfor %}</tr></thead><tbody>{% endif %}{% for row in rows %}<tr{% if row.attrs %}{% for attr, value in row.attrs %} {{attr}}=\"{{value}}\"{% endfor %}{% endif %}>{% for cell in row.cells %}<td{% if cell.attrs %}{% for attr, value in cell.attrs %} {{attr}}=\"{{value}}\"{% endfor %}{% endif %}{% if cell|hasValue %}{% if not cell.safe %} title=\"{{cell.value}}\"{% endif %}>{% if cell.safe %}{{cell.value|safe}}{% else %}{{cell.value}}{% endif %}{% else %} title=\"{{cell}}\">{{cell}}{% endif %}</td>{% endfor %}</tr>{% endfor %}{% if rows.head %}</tbody></table>{% endif %}'),\r\n\t\t\tfoot: swig.compile('<table><thead><tr>{% for i in Array.prototype.constructor.call(null, rows.columns) %}<th class=\"col-{{loop.index0}}\"></th>{% endfor %}</tr></thead><tbody>{% for row in rows %}<tr{% if row.attrs %}{% for attr, value in row.attrs %} {{attr}}=\"{{value}}\"{% endfor %}{% endif %}>{% for cell in row.cells %}<td{% if cell.attrs %}{% for attr, value in cell.attrs %} {{attr}}=\"{{value}}\"{% endfor %}{% endif %}{% if cell|hasValue %}{% if not cell.safe %} title=\"{{cell.value}}\"{% endif %}>{% if cell.safe %}{{cell.value|safe}}{% else %}{{cell.value}}{% endif %}{% else %} title=\"{{cell}}\">{{cell}}{% endif %}</td>{% endfor %}</tr>{% endfor %}</tbody><tfoot><tr><th colspan=\"{{rows.columns}}\"><div class=\"spinner\"><div></div><div></div><div></div><div></div></div></th></tr></tfoot></table>')\r\n\t\t}\r\n\r\n\t\tfor prop, value of @constructor.default\r\n\t\t\t@[prop] = value\r\n\r\n\t\tfor i of data\r\n\t\t\tif i of @\r\n\t\t\t\t@[i] = data[i]\r\n\r\n\t\t@tableBinds()\r\n\r\n\tgetData: ->\r\n\t\ttable = @\r\n\t\tdata = {\r\n\t\t\tstart: @start\r\n\t\t\tlength: if table.start then table.loadMoreLength else table.length\r\n\t\t}\r\n\t\tif @order\r\n\t\t\tdata.ordering = @order\r\n\t\tif @filter\r\n\t\t\tfor filter, value of @filter\r\n\t\t\t\tdata[filter] = value\r\n\t\tif table.start and @MSSQLData?\r\n\t\t\tdata.lastRow = @MSSQLData\r\n\t\tif @existMore\r\n\t\t\t@table.addClass('loading')\r\n\t\t\t@request = $.getJSON(@url, data, (response) ->\r\n\t\t\t\ttable.table.removeClass('loading')\r\n\t\t\t\ttable.request = null\r\n\t\t\t\tif table.MSSQLPagination\r\n\t\t\t\t\ttable.MSSQLData = response[response.length - 1]\r\n\t\t\t\tif table.onGetData?\r\n\t\t\t\t\tresponse = table.onGetData(response, table)\r\n\t\t\t\ttable.renderRows(response, !!table.start)\r\n\t\t\t\tif not response.length or response.length < (if table.start then table.loadMoreLength else table.length)\r\n\t\t\t\t\ttable.existMore = false\r\n\t\t\t\telse\r\n\t\t\t\t\ttable.start += response.length\r\n\t\t\t).always ->\r\n\t\t\t\ttable.table.removeClass('loading')\r\n\t\t\t\ttable.request = null\r\n\t\t\t\treturn\r\n\t\treturn\r\n\r\n\tnextPage: ->\r\n\t\tif not @request?\r\n\t\t\t@getData()\r\n\t\treturn\r\n\r\n\tresetTable: ->\r\n\t\tif @request?\r\n\t\t\t@request.abort()\r\n\t\t@request = null\r\n\t\t@start = 0\r\n\t\t@existMore = true\r\n\t\t@body.html('')\r\n\t\t@getData()\r\n\t\t@updateActions()\r\n\t\treturn\r\n\r\n\tcolumnsBinds: ->\r\n\t\t@orderBind()\r\n\t\t@filterBind()\r\n\t\treturn\r\n\r\n\tfilterBind: ->\r\n\t\ttable = @\r\n\t\tfilter = null\r\n\r\n\t\tif $.fn.datepicker?\r\n\t\t\tdatePickerOptions = $.extend({}, @datePickerOptions)\r\n\t\t\tdatePickerOptions.showOn = 'button'\r\n\t\t\tif datePickerOptions.constrainInput? and datePickerOptions.constrainInput\r\n\t\t\t\tdatePickerOptions.constrainInput = false\r\n\t\t\t@head.find('.date-picker input').datepicker(datePickerOptions)\r\n\t\t\t@head.find('.date-picker .ui-datepicker-trigger').attr('tabIndex', -1)\r\n\t\t\tif @datePickerOptions.constrainInput? and @datePickerOptions.constrainInput\r\n\t\t\t\t@head.find('.date-picker input').on 'keydown.table blur', (e) ->\r\n\t\t\t\t\tif e.keyCode in [13, 9] or e.type == 'blur'\r\n\t\t\t\t\t\tnow = new Date()\r\n\t\t\t\t\t\tdate = {d: '', m: '', y: ''}\r\n\t\t\t\t\t\tdateFormat = datePickerOptions.dateFormat.replace(/[^\\w]/g, '').replace(/y/g, 'yy')\r\n\t\t\t\t\t\tval = $(@).val()\r\n\t\t\t\t\t\tif val.match(/^(\\+|-)\\d+$/g)\r\n\t\t\t\t\t\t\tnow.setDate(now.getDate() + parseInt(val))\r\n\t\t\t\t\t\telse if val.match(/^\\d+$/)\r\n\t\t\t\t\t\t\tfor c, i in dateFormat\r\n\t\t\t\t\t\t\t\tif i < val.length\r\n\t\t\t\t\t\t\t\t\tdate[c] += val[i]\r\n\t\t\t\t\t\t\tif date.y.length != 4\r\n\t\t\t\t\t\t\t\trestOfYear = ''\r\n\t\t\t\t\t\t\t\tfor i in [0...4 - date.y.length]\r\n\t\t\t\t\t\t\t\t\trestOfYear += now.getFullYear().toString()[i]\r\n\t\t\t\t\t\t\t\tdate.y = restOfYear + date.y\r\n\t\t\t\t\t\telse if val.match(/^((\\+|-)(\\d+)(d|m|y)){1,3}$/ig)\r\n\t\t\t\t\t\t\twhile val.match(/((\\+|-)(\\d+)(d|m|y))/i)\r\n\t\t\t\t\t\t\t\tchange = val.match(/((\\+|-)(\\d+)(d|m|y))/i)[0]\r\n\t\t\t\t\t\t\t\tval = val.replace(change, '')\r\n\t\t\t\t\t\t\t\tchangeValue = parseInt(change.slice(0, -1))\r\n\t\t\t\t\t\t\t\tif change.toLowerCase().slice(-1) == 'd'\r\n\t\t\t\t\t\t\t\t\tnow.setDate(now.getDate() + changeValue)\r\n\t\t\t\t\t\t\t\tif change.toLowerCase().slice(-1) == 'm'\r\n\t\t\t\t\t\t\t\t\tnow.setMonth(now.getMonth() + changeValue)\r\n\t\t\t\t\t\t\t\tif change.toLowerCase().slice(-1) == 'y'\r\n\t\t\t\t\t\t\t\t\tnow.setFullYear(now.getFullYear() + changeValue)\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t$(@).trigger('change')\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\tif date.d\r\n\t\t\t\t\t\t\tnow.setDate(parseInt(date.d))\r\n\t\t\t\t\t\tif date.m\r\n\t\t\t\t\t\t\tnow.setMonth(parseInt(date.m) - 1)\r\n\t\t\t\t\t\tif date.y\r\n\t\t\t\t\t\t\tnow.setFullYear(parseInt(date.y))\r\n\t\t\t\t\t\t$(@).datepicker('setDate', now)\r\n\t\t\t\t\t\t$(@).trigger('change')\r\n\t\t\t\t\treturn\r\n\t\t\t\t@head.find('.date-picker input').each ->\r\n\t\t\t\t\tallEvents = $(@).data('events') || $._data($(@)[0], 'events');\r\n\t\t\t\t\ttypeEvents = allEvents['keydown']\r\n\t\t\t\t\ttypeEvents.unshift(typeEvents.pop());\r\n\t\t\t\t\treturn\r\n\r\n\t\t\t@head.find('.date-picker input').on 'change keyup.table', (e) ->\r\n\t\t\t\tdateInput = $(@).val()\r\n\t\t\t\tif e.type == 'keyup' and not (e.keyCode? and e.keyCode == 13 or not dateInput.length or dateInput.length == table.datePickerOptions.dateFormat.replace(/y/g, 'yy').length)\r\n\t\t\t\t\treturn\r\n\t\t\t\t###\r\n\t\t\t\tif dateInput.length == 0 && $(@).datepicker.is(':focus')\r\n\t\t\t\t\t$(@).datepicker('hide')\r\n\t\t\t\t###\r\n\t\t\t\tif table.datePickerOptions.datePickerToFormat?\r\n\t\t\t\t\tfilter = table.datePickerOptions.datePickerToFormat(dateInput)\r\n\t\t\t\t\tif filter == 'Invalid Date' or not filter?\r\n\t\t\t\t\t\tfilter = null\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tif e.type == 'keyup' and not (e.ctrlKey or e.keyCode == 17)\r\n\t\t\t\t\t\t\t$(@).datepicker('setDate', filter)\r\n\t\t\t\t\t\tfilter = filter.toISOString()\r\n\t\t\t\telse\r\n\t\t\t\t\tfilter = dateInput\r\n\t\t\t\ttable.doFilter(@, filter)\r\n\t\t\t\treturn\r\n\r\n\t\tif $.fn.timepicker?\r\n\t\t\ttimePickerOptions = $.extend({}, @timePickerOptions)\r\n\t\t\ttimePickerOptions.showOn = 'button'\r\n\t\t\t@head.find('.time-picker input').timepicker(timePickerOptions)\r\n\t\t\t@head.find('.time-picker .ui-datepicker-trigger').attr('tabIndex', -1)\r\n\t\t\tif timePickerOptions.showSecond? and timePickerOptions.showSecond\r\n\t\t\t\t@head.find('.time-picker').addClass('seconds')\r\n\t\t\t@head.find('.time-picker input').on 'change keyup.table', (e) ->\r\n\t\t\t\ttimeInput = $(@).val()\r\n\t\t\t\tif e.type == 'keyup' and not (e.keyCode? and e.keyCode == 13 or not timeInput.length or timeInput.length == table.timePickerOptions.timeFormat.length)\r\n\t\t\t\t\treturn\r\n\t\t\t\tif table.timePickerOptions.timePickerToFormat?\r\n\t\t\t\t\tfilter = table.datePickerOptions.datePickerToFormat(timeInput)\r\n\t\t\t\telse\r\n\t\t\t\t\tfilter = timeInput\r\n\t\t\t\ttable.doFilter(@, filter, false)\r\n\t\t\t\treturn\r\n\r\n\t\t@head.find('input').on 'focus.table', ->\r\n\t\t\t$(@).select()\r\n\t\t\treturn\r\n\r\n\t\t@head.find('input').on 'keypress.table', (e) ->\r\n\t\t\tif not e.charCode\r\n\t\t\t\treturn\r\n\t\t\tif $(@).hasClass('number')\r\n\t\t\t\tkeyCode = e.which || e.keyCode\r\n\t\t\t\tif keyCode < 48 or keyCode > 57\r\n\t\t\t\t\tvalue = $(@).val()\r\n\t\t\t\t\tif $(@).hasClass('comparison') and (not value.match(/\\./) and keyCode == 46 or (not value.match(/[=><]/) or $(@).hasClass('extended') and (value.match(/([=><]+)/g) and value.match(/([=><]+)/g)[0] + String.fromCharCode(keyCode) in ['<=', '<>', '>='])) and keyCode in [62, 61, 60])\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\treturn false\r\n\t\t\treturn\r\n\t\t@head.find('input').on 'keyup.table', ->\r\n\t\t\tif not $(@).parent().hasClass('date-picker') and not $(@).parent().hasClass('time-picker')\r\n\t\t\t\tfilter = $(@).val()\r\n\t\t\t\ttable.doFilter(@, filter, false)\r\n\t\t\treturn\r\n\t\t@head.find('select').on 'change', ->\r\n\t\t\ttable.doFilter(@, $(@).val())\r\n\t\t\treturn\r\n\t\t@head.find('input:checkbox').on 'change', ->\r\n\t\t\ttable.doFilter(@, $(@).prop(\"checked\"))\r\n\t\t\treturn\r\n\t\treturn\r\n\r\n\tdoFilter: (element, filter, doNow = true) ->\r\n\t\toldFilter = $.extend(true, {}, @filter)\r\n\t\tname = $(element).attr('name')\r\n\t\ttable = @\r\n\t\tif not @timeoutBind?\r\n\t\t\t@timeoutBind = null\r\n\t\tif @onFilter?\r\n\t\t\t@onFilter(element, filter)\r\n\t\telse\r\n\t\t\tif filter? and not filter\r\n\t\t\t\tfilter = null\r\n\t\t\tif filter?\r\n\t\t\t\t@filter[name] = filter\r\n\t\t\telse\r\n\t\t\t\tdelete @filter[name]\r\n\t\t\tif oldFilter[name] != @filter[name] and @autoRefresh\r\n\t\t\t\tclearTimeout(@timeoutBind)\r\n\t\t\t\tif doNow\r\n\t\t\t\t\ttable.resetTable()\r\n\t\t\t\telse\r\n\t\t\t\t\t@timeoutBind = setTimeout(()->\r\n\t\t\t\t\t\ttable.resetTable()\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t, table.filterTimeOut)\r\n\t\treturn\r\n\r\n\torderBind: ->\r\n\t\ttable = @\r\n\t\t@head.find('label.order').on 'click.table', ->\r\n\t\t\tif table.request\r\n\t\t\t\treturn false\r\n\t\t\toldOrder = table.order\r\n\t\t\torderBy = $(@).data('order')\r\n\t\t\torderByIndex = table.order.indexOf(orderBy)\r\n\t\t\ttable.head.find('label.order').removeClass('asc desc')\r\n\t\t\tif orderByIndex != -1\r\n\t\t\t\tif orderByIndex\r\n\t\t\t\t\ttable.order = orderBy\r\n\t\t\t\t\t$(@).addClass('asc')\r\n\t\t\t\telse\r\n\t\t\t\t\ttable.order = \"-#{orderBy}\"\r\n\t\t\t\t\t$(@).addClass('desc')\r\n\t\t\telse\r\n\t\t\t\ttable.order = orderBy\r\n\t\t\t\t$(@).addClass('asc')\r\n\t\t\tif table.onOrder?\r\n\t\t\t\ttable.onOrder(table.order)\r\n\t\t\telse\r\n\t\t\t\tif oldOrder != table.order\r\n\t\t\t\t\ttable.resetTable()\r\n\t\t\treturn false\r\n\t\treturn\r\n\r\n\ttableBinds: ->\r\n\t\ttable = @\r\n\t\t@bindActions()\r\n\t\tif @contextMenu\r\n\t\t\t@body.on 'contextmenu.table', 'tr:not(.row-content)', (e)->\r\n\t\t\t\ttable.menu(@, e)\r\n\t\t\t\treturn false\r\n\t\tif @selectable\r\n\t\t\t@body.on 'mousedown.table', 'tr:not(.row-content)', ->\r\n\t\t\t\tif table.request?\r\n\t\t\t\t\treturn false\r\n\t\t\t\tif table.rowSelect($(@).index() - $(@).prevAll('.row-content').length, @)\r\n\t\t\t\t\t$(table.body).find('tr').removeClass('active')\r\n\t\t\t\t\t$(@).addClass('active')\r\n\t\t\t\treturn\r\n\t\tif @defaultAction and @actions\r\n\t\t\tfor action in @actions\r\n\t\t\t\tif action.id == @defaultAction\r\n\t\t\t\t\tdefaultAction = action\r\n\t\t\t\t\tactionsDiv = @actionsDiv\r\n\t\t\t\t\t@body.on 'dblclick.table', 'tr:not(.row-content)', ->\r\n\t\t\t\t\t\tif table.request?\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\tdocument.getSelection().removeAllRanges()\r\n\t\t\t\t\t\tif actionsDiv.find(\"[data-action=#{defaultAction.id}]\").length\r\n\t\t\t\t\t\t\tactionsDiv.find(\"[data-action=#{defaultAction.id}]\").trigger('click.table')\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tdefaultAction.callback(table.rows[table.current], table)\r\n\t\t\t\t\t\treturn\r\n\t\t@body.on 'scroll.table', ->\r\n\t\t\tif table.body.find('tr.row-content').find('form').length\r\n\t\t\t\tpositionLimit = {\r\n\t\t\t\t\ttop: table.body.position().top\r\n\t\t\t\t\tbottom: table.body.position().top + table.body.height()\r\n\t\t\t\t}\r\n\t\t\t\ttable.body.find('tr.row-content').find('form').find('.error').each ->\r\n\t\t\t\t\ttop = $(@).position().top\r\n\t\t\t\t\ttoolTip = $(@).find('.error-text')\r\n\t\t\t\t\tif top > positionLimit.top and top + toolTip.height() < positionLimit.bottom\r\n\t\t\t\t\t\ttoolTip.css('top', top)\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\ttoolTip.css('top', -9999)\r\n\t\t\t\t\treturn\r\n\t\t\tbodyPos = table.body.position()\r\n\t\t\tbodyHeight = table.body.height()\r\n\t\t\tif table.body.find('tbody tr').length\r\n\t\t\t\tlastPos = table.body.find('tbody tr:last').position()\r\n\t\t\t\tlastHeight = table.body.find('tbody tr:last').outerHeight()\r\n\t\t\t\tfromBottom = (lastPos.top + lastHeight) - (bodyHeight + bodyPos.top)\r\n\t\t\t\tif fromBottom < table.fromBottomNextPage && fromBottom >= 0\r\n\t\t\t\t\ttable.nextPage()\r\n\t\t\treturn\r\n\t\t$('body').off 'keydown.table'\r\n\t\t$('body').on 'keydown.table', (e) ->\r\n\t\t\tif not (e.keyCode == 38 || e.keyCode == 40 || e.keyCode == 13) or $(e.target).is('input, textarea, select')\r\n\t\t\t\treturn\r\n\t\t\ttables = $('.table-data.arrow-navigation:visible')\r\n\t\t\tif tables.find('.body tr.active').length\r\n\t\t\t\ttables = tables.find('.body tr.active').closest('.table-data')\r\n\t\t\t\tif tables.filter('.active').length\r\n\t\t\t\t\ttables = tables.filter('.active')\r\n\t\t\t\telse\r\n\t\t\t\t\ttables = tables.first()\r\n\r\n\t\t\t\tbody = $('.body', tables);\r\n\t\t\t\trow = $('tr.active', tables);\r\n\r\n\t\t\t\tif row.length\r\n\t\t\t\t\tif e.keyCode == 13\r\n\t\t\t\t\t\trow.trigger('dblclick.table')\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tif e.keyCode == 38\r\n\t\t\t\t\t\t\tnewRow = row.prevAll().not('.row-content')\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tnewRow = row.nextAll().not('.row-content')\r\n\t\t\t\t\t\tnewRow = newRow.first()\r\n\r\n\t\t\t\t\t\tif newRow.length\r\n\t\t\t\t\t\t\tnewRow.trigger('mousedown.table')\r\n\t\t\t\t\t\t\tH = body.height()\r\n\t\t\t\t\t\t\tE = newRow.height()\r\n\t\t\t\t\t\t\tST = body.scrollTop()\r\n\t\t\t\t\t\t\tRM = newRow.offset().top - body.offset().top\r\n\r\n\t\t\t\t\t\t\tif RM < 0\r\n\t\t\t\t\t\t\t\tbody.scrollTop(ST + RM)\r\n\t\t\t\t\t\t\telse if RM + E > H\r\n\t\t\t\t\t\t\t\tbody.scrollTop((RM - H) + ST + E)\r\n\t\t\treturn\r\n\t\treturn\r\n\r\n\tmenu: (element, event) ->\r\n\t\tif @contextMenu\r\n\t\t\t@menuDiv.html(@templates.menu({actions: @actions}))\r\n\t\t\ttable = @\r\n\t\t\tfor action in @actions\r\n\t\t\t\t@menuDiv.attr({id: 'contextmenu'}).find(\"[data-action=#{action.id}]\").data('action-data', action).on 'mousedown.table', ->\r\n\t\t\t\t\taction = $(@).data('action-data')\r\n\t\t\t\t\tif action.callback?\r\n\t\t\t\t\t\taction.callback(table.rows[table.current], table)\r\n\t\t\t\t\treturn\r\n\t\t\t\tmenuAction = @menuDiv.find(\"[data-action=#{action.id}]\")\r\n\t\t\t\tif not (action.global? or action.global) and $(element).data('action-disabled')? and action.id in $(element).data('action-disabled')\r\n\t\t\t\t\tmenuAction.addClass('disabled')\r\n\t\t\t\telse\r\n\t\t\t\t\tmenuAction.removeClass('disabled')\r\n\t\t\t$(document.body).append(@menuDiv)\r\n\t\t\ttop = event.clientY\r\n\t\t\tleft = event.clientX\r\n\t\t\tif top + @menuDiv.height() + 5 > $(document).height()\r\n\t\t\t\ttop -= @menuDiv.height()\r\n\t\t\tif left + @menuDiv.width() + 5 > $(document).width()\r\n\t\t\t\tleft -= @menuDiv.width()\r\n\r\n\t\t\t@menuDiv.css({\r\n\t\t\t\ttop: top,\r\n\t\t\t\tleft: left,\r\n\t\t\t})\r\n\t\t\t$(document).on 'mousedown.table', ->\r\n\t\t\t\t$('#contextmenu').remove()\r\n\t\t\t\t$(document).unbind 'mousedown.table'\r\n\t\treturn\r\n\r\n\trowSelect: (rowIndex, element) ->\r\n\t\t@current = rowIndex\r\n\t\t@updateActions(element)\r\n\t\tif @onRowSelect?\r\n\t\t\treturn @onRowSelect(@rows[rowIndex], element)\r\n\t\treturn true\r\n\r\n\taddRowContainer: (content, pinned = false) ->\r\n\t\trowContainer = $('<tr />')\r\n\t\tcontainer = $(\"<td colspan=\\\"#{@cols}\\\" />\")\r\n\t\tcontainer.html(content)\r\n\t\trowContainer.addClass('row-content').html(container)\r\n\t\tif pinned\r\n\t\t\tif @body.find('tr.active').next().hasClass('row-content')\r\n\t\t\t\treturn\r\n\t\t\trowContainer.addClass('pinned')\r\n\t\t\trowContainer.insertAfter(@body.find('tr.active'))\r\n\t\t\t@updateActions(@body.find('tr.active'))\r\n\t\telse\r\n\t\t\tif not @body.find('tbody').length\r\n\t\t\t\trows = []\r\n\t\t\t\trows.columns = @cols\r\n\t\t\t\trows.head = true\r\n\t\t\t\t@body.html(@templates.rows({rows: rows}))\r\n\t\t\t@body.find('tbody').prepend(rowContainer)\r\n\t\t@scrollRowContainer(rowContainer)\r\n\t\treturn rowContainer\r\n\r\n\tscrollRowContainer: (rowContainer) ->\r\n\t\t@rowResize()\r\n\t\ttopPosition = @body.position()\r\n\t\tif rowContainer.hasClass('pinned')\r\n\t\t\ttopPosition.top += @body.find('tr.active').height()\r\n\t\t@body.scrollTop(@body.scrollTop() + (rowContainer.position().top - topPosition.top))\r\n\t\treturn\r\n\r\n\tcloseRowContainer: (index, force = false) ->\r\n\t\ttable = @\r\n\t\trowContainers = @body.find('tbody tr')\r\n\t\tif not @editedNotification\r\n\t\t\tforce = true\r\n\t\tif rowContainers.length > index\r\n\t\t\trowContainer = rowContainers.eq(index)\r\n\t\t\tcontinueCallback = ->\r\n\t\t\t\trowActive = rowContainer.prev('.active')\r\n\t\t\t\trowContainer.remove()\r\n\t\t\t\tif rowActive.length\r\n\t\t\t\t\ttable.updateActions(rowActive)\r\n\t\t\t\tif not table.body.find('tbody tr').length\r\n\t\t\t\t\ttable.body.html('')\r\n\t\t\t\ttable.rowResize()\r\n\t\t\t\treturn\r\n\t\t\tif @onCloseRowContainer?\r\n\t\t\t\tcb = @onCloseRowContainer(index, force, @, rowContainer, continueCallback)\r\n\t\t\t\tif cb? and not cb\r\n\t\t\t\t\treturn false\r\n\t\t\telse if not force and rowContainer.is('.edited') and not confirm('You are sure?\\n Added/edited data not was saved')\r\n\t\t\t\treturn false\r\n\t\t\tcontinueCallback()\r\n\t\treturn true\r\n\r\n\tlockAction: (id, lock = null, disable = false) ->\r\n\t\tfor action in @actions\r\n\t\t\tif action.id == id\r\n\t\t\t\tif action.element?\r\n\t\t\t\t\tactionButton = $(action.element)\r\n\t\t\t\telse\r\n\t\t\t\t\tactionButton = @actionsDiv.find(\"[data-action=#{action.id}]\")\r\n\t\t\t\tif actionButton.hasClass('locked') and (not lock? or lock? and not lock)\r\n\t\t\t\t\tactionButton.removeClass('locked')\r\n\t\t\t\telse\r\n\t\t\t\t\tactionButton.addClass('locked')\r\n\t\t\t\tif disable\r\n\t\t\t\t\tactionButton.addClass('disabled')\r\n\t\t\t\telse\r\n\t\t\t\t\tactionButton.removeClass('disabled')\r\n\t\t\t\treturn\r\n\t\treturn\r\n\r\n\tupdateActions: (rowElement = null) ->\r\n\t\tif rowElement?\r\n\t\t\tactionDisabled = if $(rowElement).data('action-disabled')? then $(rowElement).data('action-disabled') else null\r\n\t\t\tactionContentDisabled = if $(rowElement).data('action-content-disabled')? and $(rowElement).next('.row-content').length then $(rowElement).data('action-content-disabled') else null\r\n\t\telse\r\n\t\t\tactionDisabled = actionContentDisabled = null\r\n\t\tfor action in @actions\r\n\t\t\tif action.element?\r\n\t\t\t\tactionButton = $(action.element)\r\n\t\t\telse\r\n\t\t\t\tactionButton = @actionsDiv.find(\"[data-action=#{action.id}]\")\r\n\t\t\tmenuAction = @menuDiv.find(\"[data-action=#{action.id}]\")\r\n\t\t\tif @request? or not (action.global? or action.global) and (not rowElement? or (rowElement? and (actionDisabled? and action.id in actionDisabled or actionContentDisabled? and action.id in actionContentDisabled)))\r\n\t\t\t\tactionButton.addClass('disabled')\r\n\t\t\t\tmenuAction.addClass('disabled')\r\n\t\t\telse\r\n\t\t\t\tactionButton.removeClass('disabled')\r\n\t\t\t\tmenuAction.removeClass('disabled')\r\n\t\treturn\r\n\r\n\trenderActions: ->\r\n\t\t@actionsDiv.addClass('table-actions')\r\n\t\tmakeActions = []\r\n\t\tfor action in @actions\r\n\t\t\tif not action.element?\r\n\t\t\t\tmakeActions.push(action)\r\n\t\t@actionsDiv.html(@templates.actions({actions: makeActions}))\r\n\t\t@bindActions()\r\n\t\t@updateActions()\r\n\t\treturn @actionsDiv\r\n\r\n\tbindActions: ->\r\n\t\ttable = @\r\n\t\tfor action in @actions\r\n\t\t\tif action.element?\r\n\t\t\t\tactionButton = $(action.element)\r\n\t\t\telse\r\n\t\t\t\tactionButton = @actionsDiv.find(\"[data-action=#{action.id}]\")\r\n\t\t\tactionButton.data('action-data', action).off 'click.table'\r\n\t\t\tactionButton.data('action-data', action).on 'click.table', ->\r\n\t\t\t\tif $(@).hasClass('disabled') or $(@).hasClass('locked')\r\n\t\t\t\t\treturn\r\n\t\t\t\taction = $(@).data('action-data')\r\n\t\t\t\tif action.callback?\r\n\t\t\t\t\taction.callback(table.rows[table.current], table)\r\n\t\t\t\treturn\r\n\t\treturn\r\n\r\n\trenderRows: (data, append = false) ->\r\n\t\tif not append\r\n\t\t\t@rows = []\r\n\t\t\t@body.scrollTop(0)\r\n\t\t\t@updateActions()\r\n\t\tappendRows = []\r\n\t\tfor row in data\r\n\t\t\tif Array.isArray(row)\r\n\t\t\t\tappendRows.push({attrs: null, cells: row})\r\n\t\t\telse\r\n\t\t\t\tappendRows.push row\r\n\t\tArray.prototype.push.apply(@rows, appendRows)\r\n\t\tappendRows.columns = @cols\r\n\t\tif @rows.length\r\n\t\t\tif appendRows.length\r\n\t\t\t\tif !append\r\n\t\t\t\t\tappendRows.head = true\r\n\t\t\t\t\t@body.html(@templates.rows({rows: appendRows}))\r\n\t\t\t\telse\r\n\t\t\t\t\t@body.find('tbody').append(@templates.rows({rows: appendRows}))\r\n\t\telse\r\n\t\t\t@body.html('')\r\n\t\tif @table.is(':visible')\r\n\t\t\t@rowResize()\r\n\t\tif not append and @selectable and @selectFirst and @rows.length\r\n\t\t\t@body.find('tbody tr:first').trigger('mousedown.table')\r\n\t\treturn @body\r\n\r\n\tcolumnRule: (index, style = null) ->\r\n\t\trule = \"##{@table.attr('id')} table > thead > tr > .col-#{index}\"\r\n\t\tif not $('#table_columns').length\r\n\t\t\t$('head').append($('<style />').attr({id: 'table_columns', type: 'text/css'}))\r\n\t\tif (document.styleSheets)\r\n\t\t\tsheets = document.styleSheets\r\n\t\t\tfor sheet in sheets\r\n\t\t\t\tif $(sheet.ownerNode).attr('id') == 'table_columns' then break\r\n\t\tif sheet.cssRules\r\n\t\t\tcssRule = sheet.cssRules\r\n\t\telse\r\n\t\t\tcssRule = sheet.rules\r\n\t\texist = false\r\n\t\tfor selector, rulePos in cssRule\r\n\t\t\tif selector.selectorText? and selector.selectorText.toLowerCase() == rule\r\n\t\t\t\texist = true\r\n\t\t\t\tbreak\r\n\t\tif not style?\r\n\t\t\tif exist\r\n\t\t\t\tif sheet.cssRules\r\n\t\t\t\t\tsheet.deleteRule(rulePos)\r\n\t\t\t\telse\r\n\t\t\t\t\tsheet.removeRule(rulePos)\r\n\t\t\treturn\r\n\t\tif not exist\r\n\t\t\trulePos = cssRule.length\r\n\t\t\texist = true\r\n\t\t\tif sheet.addRule\r\n\t\t\t\tsheet.addRule(rule, null, rulePos)\r\n\t\t\telse\r\n\t\t\t\tsheet.insertRule(\"#{rule} {}\", rulePos)\r\n\t\tif exist\r\n\t\t\tfor attr, value of style\r\n\t\t\t\tcssRule[rulePos].style[attr] = value\r\n\t\treturn\r\n\r\n\tcolumnsResize: ->\r\n\t\ttable = @\r\n\t\tfixedCols = 0\r\n\t\tcolumns = []\r\n\t\trows = []\r\n\t\t@cols = 0\r\n\t\tif @columns.length\r\n\t\t\tif not Array.isArray(@columns[0])\r\n\t\t\t\trows = [@columns]\r\n\t\t\telse\r\n\t\t\t\trows = @columns\r\n\t\t\tfor column in rows[0]\r\n\t\t\t\t@cols += if column.attrs? and column.attrs.colspan? then column.attrs.colspan else 1\r\n\t\trows.columns = @cols\r\n\t\tfor i in [0..@cols - 1]\r\n\t\t\ttable.columnRule(i)\r\n\t\t@table.css({width: ''})\r\n\t\t@head.css({display: 'inline-block', width: 'auto'}).find('table').css({width: 'auto'})\r\n\t\t@body.hide()\r\n\t\t@foot.hide()\r\n\t\ttableWidth = @table.width()\r\n\t\t@head.css({display: '', width: ''}).find('table').css({width: ''})\r\n\t\t@body.show()\r\n\t\t@foot.show()\r\n\t\t@table.width(tableWidth)\r\n\t\tfor check in ['fixed', 'percent', 'auto']\r\n\t\t\tfor row in rows\r\n\t\t\t\ti = -1\r\n\t\t\t\tfor column in row\r\n\t\t\t\t\ti++\r\n\t\t\t\t\tif columns.length <= i\r\n\t\t\t\t\t\tcolumns.push({rowspan: 0}) for [0..(columns.length - i)]\r\n\t\t\t\t\tif columns[i].rowspan\r\n\t\t\t\t\t\tcolumns[i].rowspan--\r\n\t\t\t\t\t\ti++\r\n\t\t\t\t\tif column.attrs? and column.attrs.rowspan? and column.attrs.rowspan != 1\r\n\t\t\t\t\t\tcolumns[i].rowspan += column.attrs.rowspan - 1\r\n\t\t\t\t\tif column.attrs? and column.attrs.colspan? and column.attrs.colspan != 1\r\n\t\t\t\t\t\ti += column.attrs.colspan - 1\r\n\t\t\t\t\t\tcontinue\r\n\t\t\t\t\tif not columns[i].width?\r\n\t\t\t\t\t\twidth = 'auto'\r\n\t\t\t\t\t\tminWidth = 'initial'\r\n\t\t\t\t\t\tif column.attrs?\r\n\t\t\t\t\t\t\tif column.attrs.width?\r\n\t\t\t\t\t\t\t\twidth = column.attrs.width\r\n\t\t\t\t\t\t\tif column.attrs.minWidth?\r\n\t\t\t\t\t\t\t\tminWidth = column.attrs.minWidth\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\twidth = columns[i].width\r\n\t\t\t\t\t\tminWidth = columns[i].minWidth\r\n\t\t\t\t\tif check == 'fixed' and width.toString().match(/^\\d+(px)?$/)\r\n\t\t\t\t\t\twidth = parseInt(width)\r\n\t\t\t\t\t\ttableWidth -= width\r\n\t\t\t\t\t\tfixedCols++\r\n\t\t\t\t\telse if check == 'percent' and width.toString().match(/^\\d+%$/)\r\n\t\t\t\t\t\twidth = parseInt(tableWidth * (parseFloat(width) / 100))\r\n\t\t\t\t\t\tfixedCols++\r\n\t\t\t\t\telse if check == 'auto' and width == 'auto'\r\n\t\t\t\t\t\twidth = parseInt(tableWidth * (1 / (@cols - fixedCols)))\r\n\t\t\t\t\tcolumns[i].width = width\r\n\t\t\t\t\tcolumns[i].minWidth = minWidth\r\n\t\t@table.css {paddingRight: (tableWidth - parseInt(tableWidth * (1 / (@cols - fixedCols))) * (@cols - fixedCols))}\r\n\t\tfor columnRule, colIndex in columns\r\n\t\t\ttable.columnRule(colIndex, {\r\n\t\t\t\twidth: columnRule.width + 'px',\r\n\t\t\t\tminWidth: columnRule.minWidth + (if not isNaN(parseInt(columnRule.minWidth)) then 'px' else '')\r\n\t\t\t})\r\n\t\tif @head.width() < @head.find('table').width()\r\n\t\t\t@table.width(@head.find('table').width())\r\n\t\tif not @body.getNiceScroll().length\r\n\t\t\t@rowResize()\r\n\t\treturn\r\n\r\n\trowResize: ->\r\n\t\tif @height?\r\n\t\t\t@table.css('maxHeight', @height)\r\n\t\t\tfullHeight = @table.height() - @head.height() - @foot.height()\r\n\t\telse if @body.height()\r\n\t\t\t@body.css('display', 'none')\r\n\t\t\tfullHeight = parseInt(@table.closest(@heightOfParent).height()) - (parseFloat(@table.outerHeight()) + (if @body.is(':empty') then 1 else 0) - (if @margin? then @margin else 0))\r\n\t\t@body.css({\r\n\t\t\tmaxHeight: if fullHeight then fullHeight else ''\r\n\t\t\tdisplay: 'block'\r\n\t\t})\r\n\t\tif @body.get(0).scrollHeight > fullHeight\r\n\t\t\tif not @body.getNiceScroll().length\r\n\t\t\t\t@body.niceScroll({\r\n\t\t\t\t\thorizrailenabled: false\r\n\t\t\t\t\tcursoropacitymin: 1\r\n\t\t\t\t\trailalign: @scrollAlign\r\n\t\t\t\t\tenablekeyboard: not @arrowNavigation\r\n\t\t\t\t\tcursorwidth: 3\r\n\t\t\t\t\trailpadding: {top: 1, right: 1, left: 1, bottom: 1}\r\n\t\t\t\t})\r\n\t\t\telse\r\n\t\t\t\t@body.getNiceScroll().resize()\r\n\t\telse\r\n\t\t\t@body.getNiceScroll().remove()\r\n\t\treturn\r\n\r\n\trenderColumns: (columns) ->\r\n\t\t@columns = columns\r\n\t\torder = null\r\n\t\trows = []\r\n\t\t@cols = 0\r\n\t\tif @columns.length\r\n\t\t\tif not Array.isArray(@columns[0])\r\n\t\t\t\trows = [@columns]\r\n\t\t\telse\r\n\t\t\t\trows = @columns\r\n\t\t\tfor column in rows[0]\r\n\t\t\t\t@cols += if column.attrs? and column.attrs.colspan? then column.attrs.colspan else 1\r\n\t\trows.columns = @cols\r\n\t\tif @showDefaultOrder and @order\r\n\t\t\torder = {\r\n\t\t\t\tfield: @order.substr(!@order.indexOf('-')),\r\n\t\t\t\tsort: if not @order.indexOf('-') then 'desc' else 'asc'\r\n\t\t\t}\r\n\t\t@head.html(@templates.columns({rows: rows, order: order}))\r\n\t\t@columnsBinds()\r\n\t\treturn @head\r\n\r\n\trenderFooter: (footerRows) ->\r\n\t\t@footer = footerRows\r\n\t\trows = []\r\n\t\tif @footer.length\r\n\t\t\tfor row in @footer\r\n\t\t\t\tif Array.isArray(row)\r\n\t\t\t\t\trows.push({attrs: null, cells: row})\r\n\t\t\t\telse\r\n\t\t\t\t\trows.push row\r\n\t\trows.columns = @cols\r\n\t\t@foot.html(@templates.foot({rows: rows}))\r\n\t\treturn @foot\r\n\r\n\tuid: ->\r\n\t\tMath.floor((1 + Math.random()) * 0x100000000).toString(16).substring(1)\r\n\r\n\trender: ->\r\n\t\tattrs = JSON.parse(JSON.stringify(@attrs))\r\n\t\tif not attrs.id?\r\n\t\t\tattrs.id = \"uid_#{@uid()}\"\r\n\t\twhile $(\"#uid_#{@attrs.id}\").length\r\n\t\t\tattrs.id = \"uid_#{@uid()}\"\r\n\t\tif attrs.class?\r\n\t\t\t@table.addClass(attrs.class)\r\n\t\t\tdelete attrs.class\r\n\t\t@table.attr(attrs).addClass(\"table-data scroll-#{@scrollAlign}#{if @selectable then ' selectable' else ''}#{if @arrowNavigation then ' arrow-navigation' else ''}\")\r\n\t\t@renderColumns(@columns)\r\n\t\t@renderRows(@rows)\r\n\t\t@renderFooter(@footer)\r\n\t\t@table.append(@head)\r\n\t\t@table.append(@body)\r\n\t\t@table.append(@foot)\r\n\t\ttable = @\r\n\t\t$(window).on 'resize.table', ->\r\n\t\t\tif table.table.is(':visible')\r\n\t\t\t\ttable.columnsResize()\r\n\t\t\t\ttable.rowResize()\r\n\t\t\treturn\r\n\t\treturn @table"]}