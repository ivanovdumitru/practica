var Table,indexOf=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};Table=function(){function t(t){var e,i,n,o;this.request=null,this.existMore=!0,this.order="",this.filter={},this.actionsDiv=$("<div />"),this.menuDiv=$("<ul />"),this.table=$('<div class="table" />'),this.head=$('<div class="head" />'),this.body=$('<div class="body" />'),this.foot=$('<div class="foot" />'),this.onOrder=null,this.onFilter=null,this.onGetData=null,this.onRowSelect=null,this.onCloseRowContainer=null,this.current=null,swig.setFilter("hasValue",function(t){return"undefined"!=typeof t.value}),this.templates={actions:swig.compile('{% for action in actions %}{% if not action.element %}<button type="button" class="btn {{action.class}}" data-action="{{action.id}}">{{action.label}}</button>{% endif%}{% endfor %}'),menu:swig.compile('{% for action in actions %}<li data-action="{{action.id}}">{{action.label}}</li>{% endfor %}'),columns:swig.compile('<table><thead><tr>{% for i in Array.prototype.constructor.call(null, rows.columns) %}<th class="col-{{loop.index0}}"></th>{% endfor %}</tr></thead><tbody>{% for row in rows %}<tr>{% for column in row %}<td{% if column.attrs and column.attrs.class %} class="{{column.attrs.class}}"{% endif %}{% for attr, value in column.attrs %}{% if attr != "width" and attr != "class" %} {{attr}}="{{value}}"{% endif %}{% endfor %}>{% if column.label %}<label{% if column.name and column.order %} data-order="{{column.name}}" class="order{% if order and order.field == column.name %} {{order.sort}}{% endif %}"{% endif %}{% if column.label.key %} data-i18n="{{column.label.key}}">{{column.label.text}}{% else %}>{{column.label}}{% endif %}</label>{% endif %} {% if column.filter == "select" %}<select name="{{column.name}}">{% for option in column.filterData %}<option value="{{option.value}}"{% if column.filterValue and column.filterValue == option.value %} selected="selected"{% endif %}{% if option.label.key %} data-i18n="{{option.label.key}}">{{option.label.text}}{% else %}>{{option.label}}{% endif %}</option>{% endfor %}</select>{% elif column.filter == "date" or column.filter == "datetime" or column.filter == "time" %}{% if column.filter != "time" %}<div class="date-picker"><input autocomplete="off" type="text" name="{{column.name}}{% if column.filter == "datetime" %}[date]{% endif %}" value="{{column.filterValue}}"/></div>{% endif %}{% if column.filter != "date" %}<div class="time-picker"><input autocomplete="off" type="text" name="{{column.name}}{% if column.filter == "datetime" %}[time]{% endif %}" value="{{column.filterValue}}"/></div>{% endif %}{% elif column.filter == "text" %}<input autocomplete="off" type="text" name="{{column.name}}" value="{{column.filterValue}}"/>{% elif column.filter == "number" or column.filter == "comparison" %}<input autocomplete="off" type="text" name="{{column.name}}" class="number{% if column.filter == "comparison" %} comparison{% if column.extendedFilter %} extended{% endif %}{% endif %}" value="{{column.filterValue}}"/>{% elif column.filter %}<input autocomplete="off" type="{{column.filter}}" name="{{column.name}}" value="{{column.filterValue}}"/>{% endif %}</td>{% endfor %}</tr>{% endfor %}</tbody></table>'),rows:swig.compile('{% if rows.head %}<table><thead><tr>{% for i in Array.prototype.constructor.call(null, rows.columns) %}<th class="col-{{loop.index0}}"></th>{% endfor %}</tr></thead><tbody>{% endif %}{% for row in rows %}<tr{% if row.attrs %}{% for attr, value in row.attrs %} {{attr}}="{{value}}"{% endfor %}{% endif %}>{% for cell in row.cells %}<td{% if cell.attrs %}{% for attr, value in cell.attrs %} {{attr}}="{{value}}"{% endfor %}{% endif %}{% if cell|hasValue %}{% if not cell.safe %} title="{{cell.value}}"{% endif %}>{% if cell.safe %}{{cell.value|safe}}{% else %}{{cell.value}}{% endif %}{% else %} title="{{cell}}">{{cell}}{% endif %}</td>{% endfor %}</tr>{% endfor %}{% if rows.head %}</tbody></table>{% endif %}'),foot:swig.compile('<table><thead><tr>{% for i in Array.prototype.constructor.call(null, rows.columns) %}<th class="col-{{loop.index0}}"></th>{% endfor %}</tr></thead><tbody>{% for row in rows %}<tr{% if row.attrs %}{% for attr, value in row.attrs %} {{attr}}="{{value}}"{% endfor %}{% endif %}>{% for cell in row.cells %}<td{% if cell.attrs %}{% for attr, value in cell.attrs %} {{attr}}="{{value}}"{% endfor %}{% endif %}{% if cell|hasValue %}{% if not cell.safe %} title="{{cell.value}}"{% endif %}>{% if cell.safe %}{{cell.value|safe}}{% else %}{{cell.value}}{% endif %}{% else %} title="{{cell}}">{{cell}}{% endif %}</td>{% endfor %}</tr>{% endfor %}</tbody><tfoot><tr><th colspan="{{rows.columns}}"><div class="spinner"><div></div><div></div><div></div><div></div></div></th></tr></tfoot></table>')},n=this.constructor["default"];for(i in n)o=n[i],this[i]=o;for(e in t)e in this&&(this[e]=t[e]);this.tableBinds()}return t.VERSION="1.2.0",t["default"]={start:0,length:100,loadMoreLength:50,fromBottomNextPage:50,attrs:{},actions:[],columns:[],footer:[],rows:[],url:"",datePickerOptions:{dateFormat:"dd/mm/yy",constrainInput:!0},timePickerOptions:{timeFormat:"HH:mm"},showDefaultOrder:!1,editedNotification:!0,contextMenu:!0,selectable:!0,selectFirst:!1,defaultAction:null,scrollAlign:"right",arrowNavigation:!1,height:null,heightOfParent:null,MSSQLPagination:!1,filterTimeOut:300,autoRefresh:!0,margin:null},t.prototype.getData=function(){var t,e,i,n,o;if(n=this,t={start:this.start,length:n.start?n.loadMoreLength:n.length},this.order&&(t.ordering=this.order),this.filter){i=this.filter;for(e in i)o=i[e],t[e]=o}n.start&&null!=this.MSSQLData&&(t.lastRow=this.MSSQLData),this.existMore&&(this.table.addClass("loading"),this.request=$.getJSON(this.url,t,function(t){return n.table.removeClass("loading"),n.request=null,n.MSSQLPagination&&(n.MSSQLData=t[t.length-1]),null!=n.onGetData&&(t=n.onGetData(t,n)),n.renderRows(t,!!n.start),!t.length||t.length<(n.start?n.loadMoreLength:n.length)?n.existMore=!1:n.start+=t.length}).always(function(){n.table.removeClass("loading"),n.request=null}))},t.prototype.nextPage=function(){null==this.request&&this.getData()},t.prototype.resetTable=function(){null!=this.request&&this.request.abort(),this.request=null,this.start=0,this.existMore=!0,this.body.html(""),this.getData(),this.updateActions()},t.prototype.columnsBinds=function(){this.orderBind(),this.filterBind()},t.prototype.filterBind=function(){var t,e,i,n;i=this,e=null,null!=$.fn.datepicker&&(t=$.extend({},this.datePickerOptions),t.showOn="button",null!=t.constrainInput&&t.constrainInput&&(t.constrainInput=!1),this.head.find(".date-picker input").datepicker(t),this.head.find(".date-picker .ui-datepicker-trigger").attr("tabIndex",-1),null!=this.datePickerOptions.constrainInput&&this.datePickerOptions.constrainInput&&(this.head.find(".date-picker input").on("keydown.table blur",function(e){var i,n,o,l,s,a,r,d,h,c,u,f,p,m;if(13===(u=e.keyCode)||9===u||"blur"===e.type){if(c=new Date,l={d:"",m:"",y:""},s=t.dateFormat.replace(/[^\w]/g,"").replace(/y/g,"yy"),m=$(this).val(),m.match(/^(\+|-)\d+$/g))c.setDate(c.getDate()+parseInt(m));else if(m.match(/^\d+$/)){for(a=r=0,h=s.length;h>r;a=++r)i=s[a],a<m.length&&(l[i]+=m[a]);if(4!==l.y.length){for(p="",a=d=0,f=4-l.y.length;f>=0?f>d:d>f;a=f>=0?++d:--d)p+=c.getFullYear().toString()[a];l.y=p+l.y}}else{if(!m.match(/^((\+|-)(\d+)(d|m|y)){1,3}$/gi))return void $(this).trigger("change");for(;m.match(/((\+|-)(\d+)(d|m|y))/i);)n=m.match(/((\+|-)(\d+)(d|m|y))/i)[0],m=m.replace(n,""),o=parseInt(n.slice(0,-1)),"d"===n.toLowerCase().slice(-1)&&c.setDate(c.getDate()+o),"m"===n.toLowerCase().slice(-1)&&c.setMonth(c.getMonth()+o),"y"===n.toLowerCase().slice(-1)&&c.setFullYear(c.getFullYear()+o)}l.d&&c.setDate(parseInt(l.d)),l.m&&c.setMonth(parseInt(l.m)-1),l.y&&c.setFullYear(parseInt(l.y)),$(this).datepicker("setDate",c),$(this).trigger("change")}}),this.head.find(".date-picker input").each(function(){var t,e;t=$(this).data("events")||$._data($(this)[0],"events"),e=t.keydown,e.unshift(e.pop())})),this.head.find(".date-picker input").on("change keyup.table",function(t){var n;n=$(this).val(),("keyup"!==t.type||null!=t.keyCode&&13===t.keyCode||!n.length||n.length===i.datePickerOptions.dateFormat.replace(/y/g,"yy").length)&&(null!=i.datePickerOptions.datePickerToFormat?(e=i.datePickerOptions.datePickerToFormat(n),"Invalid Date"===e||null==e?e=null:("keyup"!==t.type||t.ctrlKey||17===t.keyCode||$(this).datepicker("setDate",e),e=e.toISOString())):e=n,i.doFilter(this,e))})),null!=$.fn.timepicker&&(n=$.extend({},this.timePickerOptions),n.showOn="button",this.head.find(".time-picker input").timepicker(n),this.head.find(".time-picker .ui-datepicker-trigger").attr("tabIndex",-1),null!=n.showSecond&&n.showSecond&&this.head.find(".time-picker").addClass("seconds"),this.head.find(".time-picker input").on("change keyup.table",function(t){var n;n=$(this).val(),("keyup"!==t.type||null!=t.keyCode&&13===t.keyCode||!n.length||n.length===i.timePickerOptions.timeFormat.length)&&(e=null!=i.timePickerOptions.timePickerToFormat?i.datePickerOptions.datePickerToFormat(n):n,i.doFilter(this,e,!1))})),this.head.find("input").on("focus.table",function(){$(this).select()}),this.head.find("input").on("keypress.table",function(t){var e,i,n;if(t.charCode&&$(this).hasClass("number")&&(e=t.which||t.keyCode,48>e||e>57)){if(n=$(this).val(),$(this).hasClass("comparison")&&(!n.match(/\./)&&46===e||(!n.match(/[=><]/)||$(this).hasClass("extended")&&n.match(/([=><]+)/g)&&("<="===(i=n.match(/([=><]+)/g)[0]+String.fromCharCode(e))||"<>"===i||">="===i))&&(62===e||61===e||60===e)))return;return!1}}),this.head.find("input").on("keyup.table",function(){$(this).parent().hasClass("date-picker")||$(this).parent().hasClass("time-picker")||(e=$(this).val(),i.doFilter(this,e,!1))}),this.head.find("select").on("change",function(){i.doFilter(this,$(this).val())}),this.head.find("input:checkbox").on("change",function(){i.doFilter(this,$(this).prop("checked"))})},t.prototype.doFilter=function(t,e,i){var n,o,l;null==i&&(i=!0),o=$.extend(!0,{},this.filter),n=$(t).attr("name"),l=this,null==this.timeoutBind&&(this.timeoutBind=null),null!=this.onFilter?this.onFilter(t,e):(null==e||e||(e=null),null!=e?this.filter[n]=e:delete this.filter[n],o[n]!==this.filter[n]&&this.autoRefresh&&(clearTimeout(this.timeoutBind),i?l.resetTable():this.timeoutBind=setTimeout(function(){l.resetTable()},l.filterTimeOut)))},t.prototype.orderBind=function(){var t;t=this,this.head.find("label.order").on("click.table",function(){var e,i,n;return t.request?!1:(e=t.order,i=$(this).data("order"),n=t.order.indexOf(i),t.head.find("label.order").removeClass("asc desc"),-1!==n?n?(t.order=i,$(this).addClass("asc")):(t.order="-"+i,$(this).addClass("desc")):(t.order=i,$(this).addClass("asc")),null!=t.onOrder?t.onOrder(t.order):e!==t.order&&t.resetTable(),!1)})},t.prototype.tableBinds=function(){var t,e,i,n,o,l,s;if(s=this,this.bindActions(),this.contextMenu&&this.body.on("contextmenu.table","tr:not(.row-content)",function(t){return s.menu(this,t),!1}),this.selectable&&this.body.on("mousedown.table","tr:not(.row-content)",function(){return null!=s.request?!1:void(s.rowSelect($(this).index()-$(this).prevAll(".row-content").length,this)&&($(s.body).find("tr").removeClass("active"),$(this).addClass("active")))}),this.defaultAction&&this.actions)for(l=this.actions,n=0,o=l.length;o>n;n++)t=l[n],t.id===this.defaultAction&&(i=t,e=this.actionsDiv,this.body.on("dblclick.table","tr:not(.row-content)",function(){return null!=s.request?!1:(document.getSelection().removeAllRanges(),void(e.find("[data-action="+i.id+"]").length?e.find("[data-action="+i.id+"]").trigger("click.table"):i.callback(s.rows[s.current],s)))}));this.body.on("scroll.table",function(){var t,e,i,n,o,l;s.body.find("tr.row-content").find("form").length&&(l={top:s.body.position().top,bottom:s.body.position().top+s.body.height()},s.body.find("tr.row-content").find("form").find(".error").each(function(){var t,e;e=$(this).position().top,t=$(this).find(".error-text"),e>l.top&&e+t.height()<l.bottom?t.css("top",e):t.css("top",-9999)})),e=s.body.position(),t=s.body.height(),s.body.find("tbody tr").length&&(o=s.body.find("tbody tr:last").position(),n=s.body.find("tbody tr:last").outerHeight(),i=o.top+n-(t+e.top),i<s.fromBottomNextPage&&i>=0&&s.nextPage())}),$("body").off("keydown.table"),$("body").on("keydown.table",function(t){var e,i,n,o,l,s,a,r;38!==t.keyCode&&40!==t.keyCode&&13!==t.keyCode||$(t.target).is("input, textarea, select")||(r=$(".table-data.arrow-navigation:visible"),r.find(".body tr.active").length&&(r=r.find(".body tr.active").closest(".table-data"),r=r.filter(".active").length?r.filter(".active"):r.first(),l=$(".body",r),a=$("tr.active",r),a.length&&(13===t.keyCode?a.trigger("dblclick.table"):(s=38===t.keyCode?a.prevAll().not(".row-content"):a.nextAll().not(".row-content"),s=s.first(),s.length&&(s.trigger("mousedown.table"),i=l.height(),e=s.height(),o=l.scrollTop(),n=s.offset().top-l.offset().top,0>n?l.scrollTop(o+n):n+e>i&&l.scrollTop(n-i+o+e))))))})},t.prototype.menu=function(t,e){var i,n,o,l,s,a,r,d,h;if(this.contextMenu){for(this.menuDiv.html(this.templates.menu({actions:this.actions})),d=this,a=this.actions,n=0,l=a.length;l>n;n++)i=a[n],this.menuDiv.attr({id:"contextmenu"}).find("[data-action="+i.id+"]").data("action-data",i).on("mousedown.table",function(){i=$(this).data("action-data"),null!=i.callback&&i.callback(d.rows[d.current],d)}),s=this.menuDiv.find("[data-action="+i.id+"]"),null==i.global&&!i.global&&null!=$(t).data("action-disabled")&&(r=i.id,indexOf.call($(t).data("action-disabled"),r)>=0)?s.addClass("disabled"):s.removeClass("disabled");$(document.body).append(this.menuDiv),h=e.clientY,o=e.clientX,h+this.menuDiv.height()+5>$(document).height()&&(h-=this.menuDiv.height()),o+this.menuDiv.width()+5>$(document).width()&&(o-=this.menuDiv.width()),this.menuDiv.css({top:h,left:o}),$(document).on("mousedown.table",function(){return $("#contextmenu").remove(),$(document).unbind("mousedown.table")})}},t.prototype.rowSelect=function(t,e){return this.current=t,this.updateActions(e),null!=this.onRowSelect?this.onRowSelect(this.rows[t],e):!0},t.prototype.addRowContainer=function(t,e){var i,n,o;if(null==e&&(e=!1),n=$("<tr />"),i=$('<td colspan="'+this.cols+'" />'),i.html(t),n.addClass("row-content").html(i),e){if(this.body.find("tr.active").next().hasClass("row-content"))return;n.addClass("pinned"),n.insertAfter(this.body.find("tr.active")),this.updateActions(this.body.find("tr.active"))}else this.body.find("tbody").length||(o=[],o.columns=this.cols,o.head=!0,this.body.html(this.templates.rows({rows:o}))),this.body.find("tbody").prepend(n);return this.scrollRowContainer(n),n},t.prototype.scrollRowContainer=function(t){var e;this.rowResize(),e=this.body.position(),t.hasClass("pinned")&&(e.top+=this.body.find("tr.active").height()),this.body.scrollTop(this.body.scrollTop()+(t.position().top-e.top))},t.prototype.closeRowContainer=function(t,e){var i,n,o,l,s;if(null==e&&(e=!1),s=this,l=this.body.find("tbody tr"),this.editedNotification||(e=!0),l.length>t){if(o=l.eq(t),n=function(){var t;t=o.prev(".active"),o.remove(),t.length&&s.updateActions(t),s.body.find("tbody tr").length||s.body.html(""),s.rowResize()},null!=this.onCloseRowContainer){if(i=this.onCloseRowContainer(t,e,this,o,n),null!=i&&!i)return!1}else if(!e&&o.is(".edited")&&!confirm("You are sure?\n Added/edited data not was saved"))return!1;n()}return!0},t.prototype.lockAction=function(t,e,i){var n,o,l,s,a;for(null==e&&(e=null),null==i&&(i=!1),a=this.actions,l=0,s=a.length;s>l;l++)if(n=a[l],n.id===t)return o=null!=n.element?$(n.element):this.actionsDiv.find("[data-action="+n.id+"]"),o.hasClass("locked")&&(null==e||null!=e&&!e)?o.removeClass("locked"):o.addClass("locked"),void(i?o.addClass("disabled"):o.removeClass("disabled"))},t.prototype.updateActions=function(t){var e,i,n,o,l,s,a,r,d,h;for(null==t&&(t=null),null!=t?(o=null!=$(t).data("action-disabled")?$(t).data("action-disabled"):null,n=null!=$(t).data("action-content-disabled")&&$(t).next(".row-content").length?$(t).data("action-content-disabled"):null):o=n=null,r=this.actions,l=0,s=r.length;s>l;l++)e=r[l],i=null!=e.element?$(e.element):this.actionsDiv.find("[data-action="+e.id+"]"),a=this.menuDiv.find("[data-action="+e.id+"]"),null!=this.request||null==e.global&&!e.global&&(null==t||null!=t&&(null!=o&&(d=e.id,indexOf.call(o,d)>=0)||null!=n&&(h=e.id,indexOf.call(n,h)>=0)))?(i.addClass("disabled"),a.addClass("disabled")):(i.removeClass("disabled"),a.removeClass("disabled"))},t.prototype.renderActions=function(){var t,e,i,n,o;for(this.actionsDiv.addClass("table-actions"),n=[],o=this.actions,e=0,i=o.length;i>e;e++)t=o[e],null==t.element&&n.push(t);return this.actionsDiv.html(this.templates.actions({actions:n})),this.bindActions(),this.updateActions(),this.actionsDiv},t.prototype.bindActions=function(){var t,e,i,n,o,l;for(l=this,o=this.actions,i=0,n=o.length;n>i;i++)t=o[i],e=null!=t.element?$(t.element):this.actionsDiv.find("[data-action="+t.id+"]"),e.data("action-data",t).off("click.table"),e.data("action-data",t).on("click.table",function(){$(this).hasClass("disabled")||$(this).hasClass("locked")||(t=$(this).data("action-data"),null!=t.callback&&t.callback(l.rows[l.current],l))})},t.prototype.renderRows=function(t,e){var i,n,o,l;for(null==e&&(e=!1),e||(this.rows=[],this.body.scrollTop(0),this.updateActions()),i=[],n=0,o=t.length;o>n;n++)l=t[n],Array.isArray(l)?i.push({attrs:null,cells:l}):i.push(l);return Array.prototype.push.apply(this.rows,i),i.columns=this.cols,this.rows.length?i.length&&(e?this.body.find("tbody").append(this.templates.rows({rows:i})):(i.head=!0,this.body.html(this.templates.rows({rows:i})))):this.body.html(""),this.table.is(":visible")&&this.rowResize(),!e&&this.selectable&&this.selectFirst&&this.rows.length&&this.body.find("tbody tr:first").trigger("mousedown.table"),this.body},t.prototype.columnRule=function(t,e){var i,n,o,l,s,a,r,d,h,c,u,f,p;if(null==e&&(e=null),d="#"+this.table.attr("id")+" table > thead > tr > .col-"+t,$("#table_columns").length||$("head").append($("<style />").attr({id:"table_columns",type:"text/css"})),document.styleSheets)for(f=document.styleSheets,l=0,a=f.length;a>l&&(u=f[l],"table_columns"!==$(u.ownerNode).attr("id"));l++);for(n=u.cssRules?u.cssRules:u.rules,o=!1,h=s=0,r=n.length;r>s;h=++s)if(c=n[h],null!=c.selectorText&&c.selectorText.toLowerCase()===d){o=!0;break}if(null==e)return void(o&&(u.cssRules?u.deleteRule(h):u.removeRule(h)));if(o||(h=n.length,o=!0,u.addRule?u.addRule(d,null,h):u.insertRule(d+" {}",h)),o)for(i in e)p=e[i],n[h].style[i]=p},t.prototype.columnsResize=function(){var t,e,i,n,o,l,s,a,r,d,h,c,u,f,p,m,b,y,g,v,w,k,$,C,x,D,R,A,O;if(R=this,l=0,o=[],D=[],this.cols=0,this.columns.length)for(D=Array.isArray(this.columns[0])?this.columns:[this.columns],w=D[0],a=0,h=w.length;h>a;a++)i=w[a],this.cols+=null!=i.attrs&&null!=i.attrs.colspan?i.attrs.colspan:1;for(D.columns=this.cols,s=r=0,k=this.cols-1;k>=0?k>=r:r>=k;s=k>=0?++r:--r)R.columnRule(s);for(this.table.css({width:""}),this.head.css({display:"inline-block",width:"auto"}).find("table").css({width:"auto"}),this.body.hide(),this.foot.hide(),A=this.table.width(),this.head.css({display:"",width:""}).find("table").css({width:""}),this.body.show(),this.foot.show(),this.table.width(A),$=["fixed","percent","auto"],d=0,c=$.length;c>d;d++)for(t=$[d],m=0,u=D.length;u>m;m++)for(x=D[m],s=-1,y=0,f=x.length;f>y;y++){if(i=x[y],s++,o.length<=s)for(g=0,C=o.length-s;C>=0?C>=g:g>=C;C>=0?g++:g--)o.push({rowspan:0});o[s].rowspan&&(o[s].rowspan--,s++),null!=i.attrs&&null!=i.attrs.rowspan&&1!==i.attrs.rowspan&&(o[s].rowspan+=i.attrs.rowspan-1),null==i.attrs||null==i.attrs.colspan||1===i.attrs.colspan?(null==o[s].width?(O="auto",b="initial",null!=i.attrs&&(null!=i.attrs.width&&(O=i.attrs.width),null!=i.attrs.minWidth&&(b=i.attrs.minWidth))):(O=o[s].width,b=o[s].minWidth),"fixed"===t&&O.toString().match(/^\d+(px)?$/)?(O=parseInt(O),A-=O,l++):"percent"===t&&O.toString().match(/^\d+%$/)?(O=parseInt(A*(parseFloat(O)/100)),l++):"auto"===t&&"auto"===O&&(O=parseInt(A*(1/(this.cols-l)))),o[s].width=O,o[s].minWidth=b):s+=i.attrs.colspan-1}for(this.table.css({paddingRight:A-parseInt(A*(1/(this.cols-l)))*(this.cols-l)}),e=v=0,p=o.length;p>v;e=++v)n=o[e],R.columnRule(e,{width:n.width+"px",minWidth:n.minWidth+(isNaN(parseInt(n.minWidth))?"":"px")});this.head.width()<this.head.find("table").width()&&this.table.width(this.head.find("table").width()),this.body.getNiceScroll().length||this.rowResize()},t.prototype.rowResize=function(){var t;null!=this.height?(this.table.css("maxHeight",this.height),t=this.table.height()-this.head.height()-this.foot.height()):this.body.height()&&(this.body.css("display","none"),t=parseInt(this.table.closest(this.heightOfParent).height())-(parseFloat(this.table.outerHeight())+(this.body.is(":empty")?1:0)-(null!=this.margin?this.margin:0))),this.body.css({maxHeight:t?t:"",display:"block"}),this.body.get(0).scrollHeight>t?this.body.getNiceScroll().length?this.body.getNiceScroll().resize():this.body.niceScroll({horizrailenabled:!1,cursoropacitymin:1,railalign:this.scrollAlign,enablekeyboard:!this.arrowNavigation,cursorwidth:3,railpadding:{top:1,right:1,left:1,bottom:1}}):this.body.getNiceScroll().remove()},t.prototype.renderColumns=function(t){var e,i,n,o,l,s;if(this.columns=t,o=null,s=[],this.cols=0,this.columns.length)for(s=Array.isArray(this.columns[0])?this.columns:[this.columns],l=s[0],i=0,n=l.length;n>i;i++)e=l[i],this.cols+=null!=e.attrs&&null!=e.attrs.colspan?e.attrs.colspan:1;return s.columns=this.cols,this.showDefaultOrder&&this.order&&(o={field:this.order.substr(!this.order.indexOf("-")),sort:this.order.indexOf("-")?"asc":"desc"}),this.head.html(this.templates.columns({rows:s,order:o})),this.columnsBinds(),this.head},t.prototype.renderFooter=function(t){var e,i,n,o,l;if(this.footer=t,l=[],this.footer.length)for(n=this.footer,e=0,i=n.length;i>e;e++)o=n[e],Array.isArray(o)?l.push({attrs:null,cells:o}):l.push(o);return l.columns=this.cols,this.foot.html(this.templates.foot({rows:l})),this.foot},t.prototype.uid=function(){return Math.floor(4294967296*(1+Math.random())).toString(16).substring(1)},t.prototype.render=function(){var t,e;for(t=JSON.parse(JSON.stringify(this.attrs)),null==t.id&&(t.id="uid_"+this.uid());$("#uid_"+this.attrs.id).length;)t.id="uid_"+this.uid();return null!=t["class"]&&(this.table.addClass(t["class"]),delete t["class"]),this.table.attr(t).addClass("table-data scroll-"+this.scrollAlign+(this.selectable?" selectable":"")+(this.arrowNavigation?" arrow-navigation":"")),this.renderColumns(this.columns),this.renderRows(this.rows),this.renderFooter(this.footer),this.table.append(this.head),this.table.append(this.body),this.table.append(this.foot),e=this,$(window).on("resize.table",function(){e.table.is(":visible")&&(e.columnsResize(),e.rowResize())}),this.table},t}();
//# sourceMappingURL=Table.min.js.map
